"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fnegishi%2FDocuments%2Fdevelop%2FHackathon%2FTokyoOpenDataHackathon%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnegishi%2FDocuments%2Fdevelop%2FHackathon%2FTokyoOpenDataHackathon&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fnegishi%2FDocuments%2Fdevelop%2FHackathon%2FTokyoOpenDataHackathon%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnegishi%2FDocuments%2Fdevelop%2FHackathon%2FTokyoOpenDataHackathon&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_negishi_Documents_develop_Hackathon_TokyoOpenDataHackathon_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/chat/route.ts */ \"(rsc)/./src/app/api/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    resolvedPagePath: \"/Users/negishi/Documents/develop/Hackathon/TokyoOpenDataHackathon/src/app/api/chat/route.ts\",\n    nextConfigOutput,\n    userland: _Users_negishi_Documents_develop_Hackathon_TokyoOpenDataHackathon_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/chat/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm5lZ2lzaGklMkZEb2N1bWVudHMlMkZkZXZlbG9wJTJGSGFja2F0aG9uJTJGVG9reW9PcGVuRGF0YUhhY2thdGhvbiUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZuZWdpc2hpJTJGRG9jdW1lbnRzJTJGZGV2ZWxvcCUyRkhhY2thdGhvbiUyRlRva3lvT3BlbkRhdGFIYWNrYXRob24maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzJDO0FBQ3hIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9reW8tb3BlbmRhdGEtaGFja2F0aG9uLz9lOWM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9uZWdpc2hpL0RvY3VtZW50cy9kZXZlbG9wL0hhY2thdGhvbi9Ub2t5b09wZW5EYXRhSGFja2F0aG9uL3NyYy9hcHAvYXBpL2NoYXQvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NoYXQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jaGF0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jaGF0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL25lZ2lzaGkvRG9jdW1lbnRzL2RldmVsb3AvSGFja2F0aG9uL1Rva3lvT3BlbkRhdGFIYWNrYXRob24vc3JjL2FwcC9hcGkvY2hhdC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY2hhdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fnegishi%2FDocuments%2Fdevelop%2FHackathon%2FTokyoOpenDataHackathon%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnegishi%2FDocuments%2Fdevelop%2FHackathon%2FTokyoOpenDataHackathon&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/chat/route.ts":
/*!***********************************!*\
  !*** ./src/app/api/chat/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_services_GeminiService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/services/GeminiService */ \"(rsc)/./src/lib/services/GeminiService.ts\");\n/* harmony import */ var _lib_services_VectorSearchService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/services/VectorSearchService */ \"(rsc)/./src/lib/services/VectorSearchService.ts\");\n\n\n\nlet geminiService;\nlet vectorSearchService;\n// Initialize services\nasync function initializeServices() {\n    if (!geminiService) {\n        geminiService = new _lib_services_GeminiService__WEBPACK_IMPORTED_MODULE_1__.GeminiService();\n    }\n    if (!vectorSearchService) {\n        vectorSearchService = new _lib_services_VectorSearchService__WEBPACK_IMPORTED_MODULE_2__.VectorSearchService();\n        try {\n            await vectorSearchService.initializeIndex();\n        } catch (error) {\n            console.error(\"Failed to initialize vector search index:\", error);\n        }\n    }\n}\nasync function POST(request) {\n    try {\n        await initializeServices();\n        const body = await request.json();\n        const { message, sessionId, language = \"ja\", useVoice = false } = body;\n        if (!message || !sessionId) {\n            const response = {\n                success: false,\n                error: \"Message and sessionId are required\"\n            };\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n                status: 400\n            });\n        }\n        // Search for relevant information\n        let context = \"\";\n        let sources = [];\n        try {\n            const searchResult = await vectorSearchService.search({\n                text: message,\n                language,\n                limit: 3\n            });\n            if (searchResult.items.length > 0) {\n                context = searchResult.items.map((item)=>`${item.title}: ${item.content}`).join(\"\\n\\n\");\n                sources = searchResult.items.map((item)=>({\n                        id: item.id,\n                        title: item.title,\n                        url: item.metadata.source,\n                        description: item.description,\n                        category: item.category,\n                        lastUpdated: item.metadata.lastUpdated\n                    }));\n            }\n        } catch (error) {\n            console.error(\"Search failed:\", error);\n        // Continue without search results\n        }\n        // Generate response using Gemini\n        let responseText;\n        try {\n            if (context) {\n                responseText = await geminiService.generateText(message, context);\n            } else {\n                // Fallback prompt for childcare-related queries\n                const fallbackPrompt = `あなたは東京都の子育て支援に関する情報をお答えするAIアシスタントです。\\n\\nユーザーの質問: ${message}\\n\\n東京都の子育て支援制度、保育園、学童保育、子ども食堂などに関する一般的な情報を提供してください。具体的な手続きについては、各区市町村の窓口へのお問い合わせを案内してください。`;\n                responseText = await geminiService.generateText(fallbackPrompt);\n            }\n        } catch (error) {\n            console.error(\"Gemini API error:\", error);\n            responseText = \"申し訳ございませんが、現在サービスに問題が発生しています。しばらく後にもう一度お試しください。\";\n        }\n        // Generate audio if requested\n        let audioUrl;\n        if (useVoice) {\n            try {\n                audioUrl = await geminiService.generateSpeech(responseText, language);\n            } catch (error) {\n                console.error(\"Speech generation failed:\", error);\n            // Continue without audio\n            }\n        }\n        const chatResponse = {\n            response: responseText,\n            audioUrl,\n            sources: sources.length > 0 ? sources : undefined\n        };\n        const response = {\n            success: true,\n            data: chatResponse\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Chat API error:\", error);\n        const response = {\n            success: false,\n            error: \"Failed to process chat request\"\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUlOLFVBQVV5QjtRQUMxQztRQUVBLE1BQU03QixXQUFzQztZQUMxQ0MsU0FBUztZQUNUNkIsTUFBTUY7UUFDUjtRQUVBLE9BQU83QyxxREFBWUEsQ0FBQ1ksSUFBSSxDQUFDSyxVQUFVO1lBQUVFLFFBQVE7UUFBSTtJQUVuRCxFQUFFLE9BQU9aLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLG1CQUFtQkE7UUFFakMsTUFBTVUsV0FBd0I7WUFDNUJDLFNBQVM7WUFDVFgsT0FBTztRQUNUO1FBRUEsT0FBT1AscURBQVlBLENBQUNZLElBQUksQ0FBQ0ssVUFBVTtZQUFFRSxRQUFRO1FBQUk7SUFDbkQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rva3lvLW9wZW5kYXRhLWhhY2thdGhvbi8uL3NyYy9hcHAvYXBpL2NoYXQvcm91dGUudHM/NDZiNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgQ2hhdFJlcXVlc3QsIENoYXRSZXNwb25zZSwgQXBpUmVzcG9uc2UgfSBmcm9tICdAL3R5cGVzJztcbmltcG9ydCB7IEdlbWluaVNlcnZpY2UgfSBmcm9tICdAL2xpYi9zZXJ2aWNlcy9HZW1pbmlTZXJ2aWNlJztcbmltcG9ydCB7IFZlY3RvclNlYXJjaFNlcnZpY2UgfSBmcm9tICdAL2xpYi9zZXJ2aWNlcy9WZWN0b3JTZWFyY2hTZXJ2aWNlJztcblxubGV0IGdlbWluaVNlcnZpY2U6IEdlbWluaVNlcnZpY2U7XG5sZXQgdmVjdG9yU2VhcmNoU2VydmljZTogVmVjdG9yU2VhcmNoU2VydmljZTtcblxuLy8gSW5pdGlhbGl6ZSBzZXJ2aWNlc1xuYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZVNlcnZpY2VzKCkge1xuICBpZiAoIWdlbWluaVNlcnZpY2UpIHtcbiAgICBnZW1pbmlTZXJ2aWNlID0gbmV3IEdlbWluaVNlcnZpY2UoKTtcbiAgfVxuICBpZiAoIXZlY3RvclNlYXJjaFNlcnZpY2UpIHtcbiAgICB2ZWN0b3JTZWFyY2hTZXJ2aWNlID0gbmV3IFZlY3RvclNlYXJjaFNlcnZpY2UoKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdmVjdG9yU2VhcmNoU2VydmljZS5pbml0aWFsaXplSW5kZXgoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgdmVjdG9yIHNlYXJjaCBpbmRleDonLCBlcnJvcik7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgaW5pdGlhbGl6ZVNlcnZpY2VzKCk7XG5cbiAgICBjb25zdCBib2R5OiBDaGF0UmVxdWVzdCA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHsgbWVzc2FnZSwgc2Vzc2lvbklkLCBsYW5ndWFnZSA9ICdqYScsIHVzZVZvaWNlID0gZmFsc2UgfSA9IGJvZHk7XG5cbiAgICBpZiAoIW1lc3NhZ2UgfHwgIXNlc3Npb25JZCkge1xuICAgICAgY29uc3QgcmVzcG9uc2U6IEFwaVJlc3BvbnNlID0ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdNZXNzYWdlIGFuZCBzZXNzaW9uSWQgYXJlIHJlcXVpcmVkJyxcbiAgICAgIH07XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2UsIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuXG4gICAgLy8gU2VhcmNoIGZvciByZWxldmFudCBpbmZvcm1hdGlvblxuICAgIGxldCBjb250ZXh0ID0gJyc7XG4gICAgbGV0IHNvdXJjZXM6IGFueVtdID0gW107XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0ID0gYXdhaXQgdmVjdG9yU2VhcmNoU2VydmljZS5zZWFyY2goe1xuICAgICAgICB0ZXh0OiBtZXNzYWdlLFxuICAgICAgICBsYW5ndWFnZSxcbiAgICAgICAgbGltaXQ6IDNcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoc2VhcmNoUmVzdWx0Lml0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29udGV4dCA9IHNlYXJjaFJlc3VsdC5pdGVtc1xuICAgICAgICAgIC5tYXAoaXRlbSA9PiBgJHtpdGVtLnRpdGxlfTogJHtpdGVtLmNvbnRlbnR9YClcbiAgICAgICAgICAuam9pbignXFxuXFxuJyk7XG4gICAgICAgIFxuICAgICAgICBzb3VyY2VzID0gc2VhcmNoUmVzdWx0Lml0ZW1zLm1hcChpdGVtID0+ICh7XG4gICAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsXG4gICAgICAgICAgdXJsOiBpdGVtLm1ldGFkYXRhLnNvdXJjZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogaXRlbS5kZXNjcmlwdGlvbixcbiAgICAgICAgICBjYXRlZ29yeTogaXRlbS5jYXRlZ29yeSxcbiAgICAgICAgICBsYXN0VXBkYXRlZDogaXRlbS5tZXRhZGF0YS5sYXN0VXBkYXRlZFxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlYXJjaCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgLy8gQ29udGludWUgd2l0aG91dCBzZWFyY2ggcmVzdWx0c1xuICAgIH1cblxuICAgIC8vIEdlbmVyYXRlIHJlc3BvbnNlIHVzaW5nIEdlbWluaVxuICAgIGxldCByZXNwb25zZVRleHQ6IHN0cmluZztcbiAgICB0cnkge1xuICAgICAgaWYgKGNvbnRleHQpIHtcbiAgICAgICAgcmVzcG9uc2VUZXh0ID0gYXdhaXQgZ2VtaW5pU2VydmljZS5nZW5lcmF0ZVRleHQobWVzc2FnZSwgY29udGV4dCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGYWxsYmFjayBwcm9tcHQgZm9yIGNoaWxkY2FyZS1yZWxhdGVkIHF1ZXJpZXNcbiAgICAgICAgY29uc3QgZmFsbGJhY2tQcm9tcHQgPSBg44GC44Gq44Gf44Gv5p2x5Lqs6YO944Gu5a2Q6IKy44Gm5pSv5o+044Gr6Zai44GZ44KL5oOF5aCx44KS44GK562U44GI44GZ44KLQUnjgqLjgrfjgrnjgr/jg7Pjg4jjgafjgZnjgIJcXG5cXG7jg6bjg7zjgrbjg7zjga7os6rllY86ICR7bWVzc2FnZX1cXG5cXG7mnbHkuqzpg73jga7lrZDogrLjgabmlK/mj7TliLbluqbjgIHkv53ogrLlnJLjgIHlrabnq6Xkv53ogrLjgIHlrZDjganjgoLpo5/loILjgarjganjgavplqLjgZnjgovkuIDoiKznmoTjgarmg4XloLHjgpLmj5DkvpvjgZfjgabjgY/jgaDjgZXjgYTjgILlhbfkvZPnmoTjgarmiYvntprjgY3jgavjgaTjgYTjgabjga/jgIHlkITljLrluILnlLrmnZHjga7nqpPlj6Pjgbjjga7jgYrllY/jgYTlkIjjgo/jgZvjgpLmoYjlhoXjgZfjgabjgY/jgaDjgZXjgYTjgIJgO1xuICAgICAgICByZXNwb25zZVRleHQgPSBhd2FpdCBnZW1pbmlTZXJ2aWNlLmdlbmVyYXRlVGV4dChmYWxsYmFja1Byb21wdCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0dlbWluaSBBUEkgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmVzcG9uc2VUZXh0ID0gJ+eUs+OBl+ios+OBlOOBluOBhOOBvuOBm+OCk+OBjOOAgeePvuWcqOOCteODvOODk+OCueOBq+WVj+mhjOOBjOeZuueUn+OBl+OBpuOBhOOBvuOBmeOAguOBl+OBsOOCieOBj+W+jOOBq+OCguOBhuS4gOW6puOBiuippuOBl+OBj+OBoOOBleOBhOOAgic7XG4gICAgfVxuXG4gICAgLy8gR2VuZXJhdGUgYXVkaW8gaWYgcmVxdWVzdGVkXG4gICAgbGV0IGF1ZGlvVXJsOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgaWYgKHVzZVZvaWNlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhdWRpb1VybCA9IGF3YWl0IGdlbWluaVNlcnZpY2UuZ2VuZXJhdGVTcGVlY2gocmVzcG9uc2VUZXh0LCBsYW5ndWFnZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTcGVlY2ggZ2VuZXJhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgICAvLyBDb250aW51ZSB3aXRob3V0IGF1ZGlvXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2hhdFJlc3BvbnNlOiBDaGF0UmVzcG9uc2UgPSB7XG4gICAgICByZXNwb25zZTogcmVzcG9uc2VUZXh0LFxuICAgICAgYXVkaW9VcmwsXG4gICAgICBzb3VyY2VzOiBzb3VyY2VzLmxlbmd0aCA+IDAgPyBzb3VyY2VzIDogdW5kZWZpbmVkXG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3BvbnNlOiBBcGlSZXNwb25zZTxDaGF0UmVzcG9uc2U+ID0ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IGNoYXRSZXNwb25zZSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlLCB7IHN0YXR1czogMjAwIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQ2hhdCBBUEkgZXJyb3I6JywgZXJyb3IpO1xuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlOiBBcGlSZXNwb25zZSA9IHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gcHJvY2VzcyBjaGF0IHJlcXVlc3QnLFxuICAgIH07XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2UsIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiR2VtaW5pU2VydmljZSIsIlZlY3RvclNlYXJjaFNlcnZpY2UiLCJnZW1pbmlTZXJ2aWNlIiwidmVjdG9yU2VhcmNoU2VydmljZSIsImluaXRpYWxpemVTZXJ2aWNlcyIsImluaXRpYWxpemVJbmRleCIsImVycm9yIiwiY29uc29sZSIsIlBPU1QiLCJyZXF1ZXN0IiwiYm9keSIsImpzb24iLCJtZXNzYWdlIiwic2Vzc2lvbklkIiwibGFuZ3VhZ2UiLCJ1c2VWb2ljZSIsInJlc3BvbnNlIiwic3VjY2VzcyIsInN0YXR1cyIsImNvbnRleHQiLCJzb3VyY2VzIiwic2VhcmNoUmVzdWx0Iiwic2VhcmNoIiwidGV4dCIsImxpbWl0IiwiaXRlbXMiLCJsZW5ndGgiLCJtYXAiLCJpdGVtIiwidGl0bGUiLCJjb250ZW50Iiwiam9pbiIsImlkIiwidXJsIiwibWV0YWRhdGEiLCJzb3VyY2UiLCJkZXNjcmlwdGlvbiIsImNhdGVnb3J5IiwibGFzdFVwZGF0ZWQiLCJyZXNwb25zZVRleHQiLCJnZW5lcmF0ZVRleHQiLCJmYWxsYmFja1Byb21wdCIsImF1ZGlvVXJsIiwiZ2VuZXJhdGVTcGVlY2giLCJjaGF0UmVzcG9uc2UiLCJ1bmRlZmluZWQiLCJkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/config.ts":
/*!***************************!*\
  !*** ./src/lib/config.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   getApiBaseUrl: () => (/* binding */ getApiBaseUrl),\n/* harmony export */   isProduction: () => (/* binding */ isProduction),\n/* harmony export */   validateConfig: () => (/* binding */ validateConfig)\n/* harmony export */ });\nconst config = {\n    geminiApiKey: process.env.GEMINI_API_KEY || \"\",\n    redisUrl: process.env.REDIS_URL,\n    gcpProjectId: process.env.GOOGLE_CLOUD_PROJECT_ID,\n    gcpRegion: process.env.GOOGLE_CLOUD_REGION || \"us-central1\",\n    enableVoice: \"true\" === \"true\",\n    enableMultiLanguage: \"true\" === \"true\",\n    maxSessionDuration: parseInt(\"3600000\" || 0),\n    maxMessagesPerSession: parseInt(\"50\" || 0)\n};\nconst validateConfig = ()=>{\n    if (!config.geminiApiKey) {\n        throw new Error(\"GEMINI_API_KEY is required\");\n    }\n};\nconst getApiBaseUrl = ()=>{\n    return \"http://localhost:3000\" || 0;\n};\nconst isProduction = ()=>{\n    return \"development\" === \"production\";\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2NvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRU8sTUFBTUEsU0FBb0I7SUFDL0JDLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxJQUFJO0lBQzVDQyxVQUFVSCxRQUFRQyxHQUFHLENBQUNHLFNBQVM7SUFDL0JDLGNBQWNMLFFBQVFDLEdBQUcsQ0FBQ0ssdUJBQXVCO0lBQ2pEQyxXQUFXUCxRQUFRQyxHQUFHLENBQUNPLG1CQUFtQixJQUFJO0lBQzlDQyxhQUFhVCxNQUFvQyxLQUFLO0lBQ3REVyxxQkFBcUJYLE1BQXdDLEtBQUs7SUFDbEVhLG9CQUFvQkMsU0FBU2QsU0FBNEMsSUFBSTtJQUM3RWdCLHVCQUF1QkYsU0FBU2QsSUFBZ0QsSUFBSTtBQUN0RixFQUFFO0FBRUssTUFBTWtCLGlCQUFpQjtJQUM1QixJQUFJLENBQUNwQixPQUFPQyxZQUFZLEVBQUU7UUFDeEIsTUFBTSxJQUFJb0IsTUFBTTtJQUNsQjtBQUNGLEVBQUU7QUFFSyxNQUFNQyxnQkFBZ0I7SUFDM0IsT0FBT3BCLHVCQUFvQyxJQUFJO0FBQ2pELEVBQUU7QUFFSyxNQUFNc0IsZUFBZTtJQUMxQixPQUFPdEIsa0JBQXlCO0FBQ2xDLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2t5by1vcGVuZGF0YS1oYWNrYXRob24vLi9zcmMvbGliL2NvbmZpZy50cz9hM2VmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcENvbmZpZyB9IGZyb20gJ0AvdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgY29uZmlnOiBBcHBDb25maWcgPSB7XG4gIGdlbWluaUFwaUtleTogcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkgfHwgJycsXG4gIHJlZGlzVXJsOiBwcm9jZXNzLmVudi5SRURJU19VUkwsXG4gIGdjcFByb2plY3RJZDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMT1VEX1BST0pFQ1RfSUQsXG4gIGdjcFJlZ2lvbjogcHJvY2Vzcy5lbnYuR09PR0xFX0NMT1VEX1JFR0lPTiB8fCAndXMtY2VudHJhbDEnLFxuICBlbmFibGVWb2ljZTogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRU5BQkxFX1ZPSUNFID09PSAndHJ1ZScsXG4gIGVuYWJsZU11bHRpTGFuZ3VhZ2U6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0VOQUJMRV9NVUxUSUxBTkcgPT09ICd0cnVlJyxcbiAgbWF4U2Vzc2lvbkR1cmF0aW9uOiBwYXJzZUludChwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19NQVhfU0VTU0lPTl9EVVJBVElPTiB8fCAnMzYwMDAwMCcpLFxuICBtYXhNZXNzYWdlc1BlclNlc3Npb246IHBhcnNlSW50KHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX01BWF9NRVNTQUdFU19QRVJfU0VTU0lPTiB8fCAnNTAnKSxcbn07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUNvbmZpZyA9ICgpOiB2b2lkID0+IHtcbiAgaWYgKCFjb25maWcuZ2VtaW5pQXBpS2V5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdHRU1JTklfQVBJX0tFWSBpcyByZXF1aXJlZCcpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0QXBpQmFzZVVybCA9ICgpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX0JBU0VfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzUHJvZHVjdGlvbiA9ICgpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbic7XG59OyJdLCJuYW1lcyI6WyJjb25maWciLCJnZW1pbmlBcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiR0VNSU5JX0FQSV9LRVkiLCJyZWRpc1VybCIsIlJFRElTX1VSTCIsImdjcFByb2plY3RJZCIsIkdPT0dMRV9DTE9VRF9QUk9KRUNUX0lEIiwiZ2NwUmVnaW9uIiwiR09PR0xFX0NMT1VEX1JFR0lPTiIsImVuYWJsZVZvaWNlIiwiTkVYVF9QVUJMSUNfRU5BQkxFX1ZPSUNFIiwiZW5hYmxlTXVsdGlMYW5ndWFnZSIsIk5FWFRfUFVCTElDX0VOQUJMRV9NVUxUSUxBTkciLCJtYXhTZXNzaW9uRHVyYXRpb24iLCJwYXJzZUludCIsIk5FWFRfUFVCTElDX01BWF9TRVNTSU9OX0RVUkFUSU9OIiwibWF4TWVzc2FnZXNQZXJTZXNzaW9uIiwiTkVYVF9QVUJMSUNfTUFYX01FU1NBR0VTX1BFUl9TRVNTSU9OIiwidmFsaWRhdGVDb25maWciLCJFcnJvciIsImdldEFwaUJhc2VVcmwiLCJORVhUX1BVQkxJQ19BUElfQkFTRV9VUkwiLCJpc1Byb2R1Y3Rpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/config.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/services/GeminiService.ts":
/*!*******************************************!*\
  !*** ./src/lib/services/GeminiService.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GeminiService: () => (/* binding */ GeminiService)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var _lib_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/config */ \"(rsc)/./src/lib/config.ts\");\n\n\nclass GeminiService {\n    constructor(){\n        if (!_lib_config__WEBPACK_IMPORTED_MODULE_1__.config.geminiApiKey) {\n            throw new Error(\"Gemini API key is not configured\");\n        }\n        this.genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(_lib_config__WEBPACK_IMPORTED_MODULE_1__.config.geminiApiKey);\n        this.model = this.genAI.getGenerativeModel({\n            model: \"gemini-2.0-flash-exp\"\n        });\n    }\n    async generateText(prompt, context) {\n        try {\n            const fullPrompt = context ? `Context: ${context}\\n\\nUser Question: ${prompt}\\n\\nPlease provide a helpful and accurate response based on the context provided. If the context doesn't contain relevant information, please say so and provide general guidance.` : prompt;\n            const result = await this.model.generateContent(fullPrompt);\n            const response = await result.response;\n            return response.text();\n        } catch (error) {\n            console.error(\"Error generating text with Gemini:\", error);\n            throw new Error(\"Failed to generate response\");\n        }\n    }\n    async processAudio(audioData, mimeType) {\n        try {\n            // Convert base64 to buffer if needed\n            const audioBuffer = Buffer.from(audioData, \"base64\");\n            const result = await this.model.generateContent([\n                {\n                    inlineData: {\n                        data: audioData,\n                        mimeType: mimeType\n                    }\n                },\n                \"Please transcribe this audio to text. Respond only with the transcribed text.\"\n            ]);\n            const response = await result.response;\n            return response.text();\n        } catch (error) {\n            console.error(\"Error processing audio with Gemini:\", error);\n            throw new Error(\"Failed to process audio\");\n        }\n    }\n    async generateSpeech(text, language = \"ja\") {\n        try {\n            // Note: Gemini doesn't have direct text-to-speech yet\n            // This is a placeholder for future implementation\n            // You might want to use Web Speech API on the client side instead\n            const prompt = `Generate audio for the following text in ${language}: \"${text}\"`;\n            const result = await this.model.generateContent([\n                prompt,\n                \"Please generate speech audio for this text. Return the audio as base64 encoded data.\"\n            ]);\n            const response = await result.response;\n            return response.text();\n        } catch (error) {\n            console.error(\"Error generating speech with Gemini:\", error);\n            // Return empty string as fallback - client will use Web Speech API\n            return \"\";\n        }\n    }\n    async embedText(text) {\n        try {\n            // Use Gemini's embedding model\n            const embeddingModel = this.genAI.getGenerativeModel({\n                model: \"text-embedding-004\"\n            });\n            const result = await embeddingModel.embedContent(text);\n            return result.embedding.values;\n        } catch (error) {\n            console.error(\"Error generating embeddings with Gemini:\", error);\n            throw new Error(\"Failed to generate embeddings\");\n        }\n    }\n    async analyzeIntent(message) {\n        try {\n            const prompt = `\nAnalyze the following user message and extract:\n1. Intent (one of: greeting, question, request_info, complaint, thanks, goodbye, childcare_info, disaster_info, general_info)\n2. Entities (key information like location, facility type, age, etc.)\n3. Confidence score (0-1)\n\nUser message: \"${message}\"\n\nRespond in JSON format:\n{\n  \"intent\": \"intent_name\",\n  \"entities\": {\"key\": \"value\"},\n  \"confidence\": 0.95\n}`;\n            const result = await this.model.generateContent(prompt);\n            const response = await result.response;\n            const text = response.text();\n            try {\n                return JSON.parse(text);\n            } catch  {\n                // Fallback if JSON parsing fails\n                return {\n                    intent: \"question\",\n                    entities: {},\n                    confidence: 0.5\n                };\n            }\n        } catch (error) {\n            console.error(\"Error analyzing intent with Gemini:\", error);\n            return {\n                intent: \"question\",\n                entities: {},\n                confidence: 0.5\n            };\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFNBQVMsTUFBTSxJQUFJLENBQUNOLEtBQUssQ0FBQ08sZUFBZSxDQUFDSjtZQUNoRCxNQUFNSyxXQUFXLE1BQU1GLE9BQU9FLFFBQVE7WUFDdEMsTUFBTUMsT0FBT0QsU0FBU0MsSUFBSTtZQUUxQixJQUFJO2dCQUNGLE9BQU9vQixLQUFLQyxLQUFLLENBQUNyQjtZQUNwQixFQUFFLE9BQU07Z0JBQ04saUNBQWlDO2dCQUNqQyxPQUFPO29CQUNMc0IsUUFBUTtvQkFDUkMsVUFBVSxDQUFDO29CQUNYQyxZQUFZO2dCQUNkO1lBQ0Y7UUFDRixFQUFFLE9BQU92QixPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyx1Q0FBdUNBO1lBQ3JELE9BQU87Z0JBQ0xxQixRQUFRO2dCQUNSQyxVQUFVLENBQUM7Z0JBQ1hDLFlBQVk7WUFDZDtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rva3lvLW9wZW5kYXRhLWhhY2thdGhvbi8uL3NyYy9saWIvc2VydmljZXMvR2VtaW5pU2VydmljZS50cz85YTRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdvb2dsZUdlbmVyYXRpdmVBSSB9IGZyb20gJ0Bnb29nbGUvZ2VuZXJhdGl2ZS1haSc7XG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICdAL2xpYi9jb25maWcnO1xuXG5leHBvcnQgY2xhc3MgR2VtaW5pU2VydmljZSB7XG4gIHByaXZhdGUgZ2VuQUk6IEdvb2dsZUdlbmVyYXRpdmVBSTtcbiAgcHJpdmF0ZSBtb2RlbDogYW55O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGlmICghY29uZmlnLmdlbWluaUFwaUtleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdHZW1pbmkgQVBJIGtleSBpcyBub3QgY29uZmlndXJlZCcpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmdlbkFJID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSShjb25maWcuZ2VtaW5pQXBpS2V5KTtcbiAgICB0aGlzLm1vZGVsID0gdGhpcy5nZW5BSS5nZXRHZW5lcmF0aXZlTW9kZWwoeyBtb2RlbDogJ2dlbWluaS0yLjAtZmxhc2gtZXhwJyB9KTtcbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlVGV4dChwcm9tcHQ6IHN0cmluZywgY29udGV4dD86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZ1bGxQcm9tcHQgPSBjb250ZXh0IFxuICAgICAgICA/IGBDb250ZXh0OiAke2NvbnRleHR9XFxuXFxuVXNlciBRdWVzdGlvbjogJHtwcm9tcHR9XFxuXFxuUGxlYXNlIHByb3ZpZGUgYSBoZWxwZnVsIGFuZCBhY2N1cmF0ZSByZXNwb25zZSBiYXNlZCBvbiB0aGUgY29udGV4dCBwcm92aWRlZC4gSWYgdGhlIGNvbnRleHQgZG9lc24ndCBjb250YWluIHJlbGV2YW50IGluZm9ybWF0aW9uLCBwbGVhc2Ugc2F5IHNvIGFuZCBwcm92aWRlIGdlbmVyYWwgZ3VpZGFuY2UuYFxuICAgICAgICA6IHByb21wdDtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tb2RlbC5nZW5lcmF0ZUNvbnRlbnQoZnVsbFByb21wdCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlc3VsdC5yZXNwb25zZTtcbiAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgdGV4dCB3aXRoIEdlbWluaTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZW5lcmF0ZSByZXNwb25zZScpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHByb2Nlc3NBdWRpbyhhdWRpb0RhdGE6IHN0cmluZywgbWltZVR5cGU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENvbnZlcnQgYmFzZTY0IHRvIGJ1ZmZlciBpZiBuZWVkZWRcbiAgICAgIGNvbnN0IGF1ZGlvQnVmZmVyID0gQnVmZmVyLmZyb20oYXVkaW9EYXRhLCAnYmFzZTY0Jyk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubW9kZWwuZ2VuZXJhdGVDb250ZW50KFtcbiAgICAgICAge1xuICAgICAgICAgIGlubGluZURhdGE6IHtcbiAgICAgICAgICAgIGRhdGE6IGF1ZGlvRGF0YSxcbiAgICAgICAgICAgIG1pbWVUeXBlOiBtaW1lVHlwZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ1BsZWFzZSB0cmFuc2NyaWJlIHRoaXMgYXVkaW8gdG8gdGV4dC4gUmVzcG9uZCBvbmx5IHdpdGggdGhlIHRyYW5zY3JpYmVkIHRleHQuJ1xuICAgICAgXSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVzdWx0LnJlc3BvbnNlO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBhdWRpbyB3aXRoIEdlbWluaTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwcm9jZXNzIGF1ZGlvJyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2VuZXJhdGVTcGVlY2godGV4dDogc3RyaW5nLCBsYW5ndWFnZTogc3RyaW5nID0gJ2phJyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIE5vdGU6IEdlbWluaSBkb2Vzbid0IGhhdmUgZGlyZWN0IHRleHQtdG8tc3BlZWNoIHlldFxuICAgICAgLy8gVGhpcyBpcyBhIHBsYWNlaG9sZGVyIGZvciBmdXR1cmUgaW1wbGVtZW50YXRpb25cbiAgICAgIC8vIFlvdSBtaWdodCB3YW50IHRvIHVzZSBXZWIgU3BlZWNoIEFQSSBvbiB0aGUgY2xpZW50IHNpZGUgaW5zdGVhZFxuICAgICAgXG4gICAgICBjb25zdCBwcm9tcHQgPSBgR2VuZXJhdGUgYXVkaW8gZm9yIHRoZSBmb2xsb3dpbmcgdGV4dCBpbiAke2xhbmd1YWdlfTogXCIke3RleHR9XCJgO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLm1vZGVsLmdlbmVyYXRlQ29udGVudChbXG4gICAgICAgIHByb21wdCxcbiAgICAgICAgJ1BsZWFzZSBnZW5lcmF0ZSBzcGVlY2ggYXVkaW8gZm9yIHRoaXMgdGV4dC4gUmV0dXJuIHRoZSBhdWRpbyBhcyBiYXNlNjQgZW5jb2RlZCBkYXRhLidcbiAgICAgIF0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlc3VsdC5yZXNwb25zZTtcbiAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgc3BlZWNoIHdpdGggR2VtaW5pOicsIGVycm9yKTtcbiAgICAgIC8vIFJldHVybiBlbXB0eSBzdHJpbmcgYXMgZmFsbGJhY2sgLSBjbGllbnQgd2lsbCB1c2UgV2ViIFNwZWVjaCBBUElcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH1cblxuICBhc3luYyBlbWJlZFRleHQodGV4dDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXJbXT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBVc2UgR2VtaW5pJ3MgZW1iZWRkaW5nIG1vZGVsXG4gICAgICBjb25zdCBlbWJlZGRpbmdNb2RlbCA9IHRoaXMuZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHsgbW9kZWw6ICd0ZXh0LWVtYmVkZGluZy0wMDQnIH0pO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW1iZWRkaW5nTW9kZWwuZW1iZWRDb250ZW50KHRleHQpO1xuICAgICAgcmV0dXJuIHJlc3VsdC5lbWJlZGRpbmcudmFsdWVzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIGVtYmVkZGluZ3Mgd2l0aCBHZW1pbmk6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZ2VuZXJhdGUgZW1iZWRkaW5ncycpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFuYWx5emVJbnRlbnQobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgaW50ZW50OiBzdHJpbmc7XG4gICAgZW50aXRpZXM6IFJlY29yZDxzdHJpbmcsIGFueT47XG4gICAgY29uZmlkZW5jZTogbnVtYmVyO1xuICB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByb21wdCA9IGBcbkFuYWx5emUgdGhlIGZvbGxvd2luZyB1c2VyIG1lc3NhZ2UgYW5kIGV4dHJhY3Q6XG4xLiBJbnRlbnQgKG9uZSBvZjogZ3JlZXRpbmcsIHF1ZXN0aW9uLCByZXF1ZXN0X2luZm8sIGNvbXBsYWludCwgdGhhbmtzLCBnb29kYnllLCBjaGlsZGNhcmVfaW5mbywgZGlzYXN0ZXJfaW5mbywgZ2VuZXJhbF9pbmZvKVxuMi4gRW50aXRpZXMgKGtleSBpbmZvcm1hdGlvbiBsaWtlIGxvY2F0aW9uLCBmYWNpbGl0eSB0eXBlLCBhZ2UsIGV0Yy4pXG4zLiBDb25maWRlbmNlIHNjb3JlICgwLTEpXG5cblVzZXIgbWVzc2FnZTogXCIke21lc3NhZ2V9XCJcblxuUmVzcG9uZCBpbiBKU09OIGZvcm1hdDpcbntcbiAgXCJpbnRlbnRcIjogXCJpbnRlbnRfbmFtZVwiLFxuICBcImVudGl0aWVzXCI6IHtcImtleVwiOiBcInZhbHVlXCJ9LFxuICBcImNvbmZpZGVuY2VcIjogMC45NVxufWA7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubW9kZWwuZ2VuZXJhdGVDb250ZW50KHByb21wdCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlc3VsdC5yZXNwb25zZTtcbiAgICAgIGNvbnN0IHRleHQgPSByZXNwb25zZS50ZXh0KCk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHRleHQpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIC8vIEZhbGxiYWNrIGlmIEpTT04gcGFyc2luZyBmYWlsc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGludGVudDogJ3F1ZXN0aW9uJyxcbiAgICAgICAgICBlbnRpdGllczoge30sXG4gICAgICAgICAgY29uZmlkZW5jZTogMC41XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFuYWx5emluZyBpbnRlbnQgd2l0aCBHZW1pbmk6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW50ZW50OiAncXVlc3Rpb24nLFxuICAgICAgICBlbnRpdGllczoge30sXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuNVxuICAgICAgfTtcbiAgICB9XG4gIH1cbn0iXSwibmFtZXMiOlsiR29vZ2xlR2VuZXJhdGl2ZUFJIiwiY29uZmlnIiwiR2VtaW5pU2VydmljZSIsImNvbnN0cnVjdG9yIiwiZ2VtaW5pQXBpS2V5IiwiRXJyb3IiLCJnZW5BSSIsIm1vZGVsIiwiZ2V0R2VuZXJhdGl2ZU1vZGVsIiwiZ2VuZXJhdGVUZXh0IiwicHJvbXB0IiwiY29udGV4dCIsImZ1bGxQcm9tcHQiLCJyZXN1bHQiLCJnZW5lcmF0ZUNvbnRlbnQiLCJyZXNwb25zZSIsInRleHQiLCJlcnJvciIsImNvbnNvbGUiLCJwcm9jZXNzQXVkaW8iLCJhdWRpb0RhdGEiLCJtaW1lVHlwZSIsImF1ZGlvQnVmZmVyIiwiQnVmZmVyIiwiZnJvbSIsImlubGluZURhdGEiLCJkYXRhIiwiZ2VuZXJhdGVTcGVlY2giLCJsYW5ndWFnZSIsImVtYmVkVGV4dCIsImVtYmVkZGluZ01vZGVsIiwiZW1iZWRDb250ZW50IiwiZW1iZWRkaW5nIiwidmFsdWVzIiwiYW5hbHl6ZUludGVudCIsIm1lc3NhZ2UiLCJKU09OIiwicGFyc2UiLCJpbnRlbnQiLCJlbnRpdGllcyIsImNvbmZpZGVuY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/services/GeminiService.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/services/OpenDataService.ts":
/*!*********************************************!*\
  !*** ./src/lib/services/OpenDataService.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpenDataService: () => (/* binding */ OpenDataService)\n/* harmony export */ });\nclass OpenDataService {\n    async fetchChildcareData() {\n        const items = [];\n        try {\n            // Sample data for MVP (実際の実装では外部APIからデータを取得)\n            const sampleData = await this.generateSampleChildcareData();\n            items.push(...sampleData);\n            return items;\n        } catch (error) {\n            console.error(\"Error fetching childcare data:\", error);\n            return this.getFallbackChildcareData();\n        }\n    }\n    async generateSampleChildcareData() {\n        return [\n            {\n                id: \"childcare-001\",\n                title: \"保育園入園申請について\",\n                description: \"東京都内の保育園入園申請の手続きと必要書類について\",\n                category: \"childcare\",\n                tags: [\n                    \"保育園\",\n                    \"入園\",\n                    \"申請\",\n                    \"手続き\"\n                ],\n                content: `\n保育園入園申請の手続きについて\n\n【申請時期】\n- 4月入園：前年10月〜11月\n- 途中入園：入園希望月の前月15日まで\n\n【必要書類】\n1. 保育園等利用申込書\n2. 就労証明書（両親分）\n3. 課税証明書\n4. 健康診断書\n\n【申請先】\n各区市町村の保育課または子ども家庭支援センター\n\n【選考基準】\n保育の必要性の度合いに応じてポイント制で選考\n- 就労時間\n- 家庭状況\n- その他事情\n\n詳細は各自治体のホームページをご確認ください。\n        `,\n                metadata: {\n                    source: \"東京都子育て支援制度レジストリ\",\n                    lastUpdated: new Date(\"2024-01-01\"),\n                    language: \"ja\"\n                }\n            },\n            {\n                id: \"childcare-002\",\n                title: \"学童保育（放課後児童クラブ）について\",\n                description: \"小学生向けの学童保育サービスに関する情報\",\n                category: \"childcare\",\n                tags: [\n                    \"学童保育\",\n                    \"小学生\",\n                    \"放課後\",\n                    \"児童クラブ\"\n                ],\n                content: `\n学童保育（放課後児童クラブ）について\n\n【対象】\n小学1年生〜6年生（自治体により異なる）\n\n【利用時間】\n- 平日：放課後〜18:00（延長保育あり）\n- 土曜日：8:00〜18:00\n- 長期休暇中：8:00〜18:00\n\n【申請方法】\n1. 各自治体の児童課等に申請\n2. 就労証明書等の提出\n3. 面談・審査\n\n【利用料金】\n月額5,000円〜15,000円程度（自治体・世帯収入により異なる）\n\n【サービス内容】\n- 宿題指導\n- 外遊び・室内遊び\n- おやつ提供\n- 行事・イベント\n\n詳細は各区市町村にお問い合わせください。\n        `,\n                metadata: {\n                    source: \"東京都学童保育所一覧\",\n                    lastUpdated: new Date(\"2024-01-01\"),\n                    language: \"ja\"\n                }\n            },\n            {\n                id: \"childcare-003\",\n                title: \"子育て支援制度・手当について\",\n                description: \"東京都の子育て世帯向け支援制度と各種手当\",\n                category: \"childcare\",\n                tags: [\n                    \"支援制度\",\n                    \"手当\",\n                    \"補助金\",\n                    \"助成\"\n                ],\n                content: `\n子育て支援制度・手当について\n\n【児童手当】\n- 0歳〜中学校卒業まで\n- 月額：3歳未満15,000円、3歳以上小学校修了前10,000円（第3子以降15,000円）、中学生10,000円\n\n【児童育成手当（東京都）】\n- ひとり親世帯等が対象\n- 月額13,500円（18歳まで）\n\n【乳幼児医療費助成】\n- 中学校3年生まで医療費無料（所得制限あり）\n\n【保育料無償化】\n- 3〜5歳児：認可保育園等の利用料無料\n- 0〜2歳児：住民税非課税世帯のみ無料\n\n【その他支援】\n- 出産育児一時金：50万円\n- 産前産後ヘルパー派遣\n- 一時保育サービス\n- 子育てひろば事業\n\n申請方法や詳細条件は各区市町村窓口にご相談ください。\n        `,\n                metadata: {\n                    source: \"東京都子育て支援制度レジストリ\",\n                    lastUpdated: new Date(\"2024-01-01\"),\n                    language: \"ja\"\n                }\n            },\n            {\n                id: \"childcare-004\",\n                title: \"子ども食堂・地域支援について\",\n                description: \"地域の子ども食堂と子育て支援サービス\",\n                category: \"childcare\",\n                tags: [\n                    \"子ども食堂\",\n                    \"地域支援\",\n                    \"コミュニティ\"\n                ],\n                content: `\n子ども食堂・地域支援について\n\n【子ども食堂とは】\n地域の子どもたちが無料または低価格で食事を取れる場所\n\n【主な活動】\n- 食事提供（月1〜2回程度）\n- 学習支援\n- 遊び・交流活動\n- 保護者向け相談\n\n【利用方法】\n- 事前申込不要（当日参加OK）\n- 子どもは無料、大人は300円程度\n- 地域住民なら誰でも参加可能\n\n【東京都内の主な子ども食堂】\n- 新宿区：約15箇所\n- 世田谷区：約30箇所\n- 練馬区：約20箇所\n- その他各区に複数箇所\n\n【その他地域支援】\n- 子育てサロン\n- 育児相談\n- 一時預かり\n- 親子向けイベント\n\n最新情報は各自治体ホームページまたは地域子育て支援センターにお問い合わせください。\n        `,\n                metadata: {\n                    source: \"東京都子ども食堂一覧\",\n                    lastUpdated: new Date(\"2024-01-01\"),\n                    language: \"ja\"\n                }\n            }\n        ];\n    }\n    getFallbackChildcareData() {\n        return [\n            {\n                id: \"fallback-001\",\n                title: \"よくある質問：保育園について\",\n                description: \"保育園に関するよくある質問と回答\",\n                category: \"childcare\",\n                tags: [\n                    \"FAQ\",\n                    \"保育園\"\n                ],\n                content: \"保育園の申込みや利用に関する基本的な情報を提供しています。詳細は最寄りの区市町村窓口にお問い合わせください。\",\n                metadata: {\n                    source: \"システム内蔵データ\",\n                    lastUpdated: new Date(),\n                    language: \"ja\"\n                }\n            }\n        ];\n    }\n    async searchChildcareInfo(query) {\n        const allData = await this.fetchChildcareData();\n        // Simple text search implementation\n        const searchTerms = query.toLowerCase().split(\" \");\n        return allData.filter((item)=>{\n            const searchableText = (item.title + \" \" + item.description + \" \" + item.content + \" \" + item.tags.join(\" \")).toLowerCase();\n            return searchTerms.some((term)=>searchableText.includes(term));\n        });\n    }\n    async getDataSources() {\n        return [\n            {\n                id: \"tokyo-childcare-registry\",\n                title: \"東京デジタル2030ビジョン（こどもDX）子育て支援制度レジストリ\",\n                url: \"https://catalog.data.metro.tokyo.lg.jp/dataset/t134211d0000000001\",\n                description: \"東京都の子育て支援制度に関する包括的なデータベース\",\n                category: \"childcare\",\n                lastUpdated: new Date(\"2024-01-01\")\n            },\n            {\n                id: \"afterschool-care\",\n                title: \"学童保育所一覧\",\n                url: \"https://catalog.data.metro.tokyo.lg.jp/dataset/t132012d0000000032\",\n                description: \"東京都内の学童保育所の詳細情報\",\n                category: \"childcare\",\n                lastUpdated: new Date(\"2024-01-01\")\n            },\n            {\n                id: \"small-nurseries\",\n                title: \"小規模保育所\",\n                url: \"https://catalog.data.metro.tokyo.lg.jp/dataset/t131105d0000000209\",\n                description: \"小規模保育所の所在地と詳細情報\",\n                category: \"childcare\",\n                lastUpdated: new Date(\"2024-01-01\")\n            },\n            {\n                id: \"kids-cafeteria\",\n                title: \"子ども食堂一覧\",\n                url: \"https://catalog.data.metro.tokyo.lg.jp/dataset/t132217d3100000001\",\n                description: \"地域の子ども食堂の開催情報\",\n                category: \"childcare\",\n                lastUpdated: new Date(\"2024-01-01\")\n            }\n        ];\n    }\n    constructor(){\n        this.catalogBaseUrl = \"https://catalog.data.metro.tokyo.lg.jp\";\n        this.storageBaseUrl = \"https://data.storage.data.metro.tokyo.lg.jp\";\n        // 育児・子育て関連のデータセットID（MVP用）\n        this.childcareDatasets = [\n            \"t134211d0000000001\",\n            \"t132012d0000000032\",\n            \"t131105d0000000209\",\n            \"t132217d3100000001\"\n        ];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3NlcnZpY2VzL09wZW5EYXRhU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBR08sTUFBTUE7SUFZWCxNQUFNQyxxQkFBOEM7UUFDbEQsTUFBTUMsUUFBd0IsRUFBRTtRQUVoQyxJQUFJO1lBQ0YsNkNBQTZDO1lBQzdDLE1BQU1DLGFBQWEsTUFBTSxJQUFJLENBQUNDLDJCQUEyQjtZQUN6REYsTUFBTUcsSUFBSSxJQUFJRjtZQUVkLE9BQU9EO1FBQ1QsRUFBRSxPQUFPSSxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyxrQ0FBa0NBO1lBQ2hELE9BQU8sSUFBSSxDQUFDRSx3QkFBd0I7UUFDdEM7SUFDRjtJQUVBLE1BQWNKLDhCQUF1RDtRQUNuRSxPQUFPO1lBQ0w7Z0JBQ0VLLElBQUk7Z0JBQ0pDLE9BQU87Z0JBQ1BDLGFBQWE7Z0JBQ2JDLFVBQVU7Z0JBQ1ZDLE1BQU07b0JBQUM7b0JBQU87b0JBQU07b0JBQU07aUJBQU07Z0JBQ2hDQyxTQUFTLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1FBdUJWLENBQUM7Z0JBQ0RDLFVBQVU7b0JBQ1JDLFFBQVE7b0JBQ1JDLGFBQWEsSUFBSUMsS0FBSztvQkFDdEJDLFVBQVU7Z0JBQ1o7WUFDRjtZQUNBO2dCQUNFVixJQUFJO2dCQUNKQyxPQUFPO2dCQUNQQyxhQUFhO2dCQUNiQyxVQUFVO2dCQUNWQyxNQUFNO29CQUFDO29CQUFRO29CQUFPO29CQUFPO2lCQUFRO2dCQUNyQ0MsU0FBUyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztRQTBCVixDQUFDO2dCQUNEQyxVQUFVO29CQUNSQyxRQUFRO29CQUNSQyxhQUFhLElBQUlDLEtBQUs7b0JBQ3RCQyxVQUFVO2dCQUNaO1lBQ0Y7WUFDQTtnQkFDRVYsSUFBSTtnQkFDSkMsT0FBTztnQkFDUEMsYUFBYTtnQkFDYkMsVUFBVTtnQkFDVkMsTUFBTTtvQkFBQztvQkFBUTtvQkFBTTtvQkFBTztpQkFBSztnQkFDakNDLFNBQVMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztRQXlCVixDQUFDO2dCQUNEQyxVQUFVO29CQUNSQyxRQUFRO29CQUNSQyxhQUFhLElBQUlDLEtBQUs7b0JBQ3RCQyxVQUFVO2dCQUNaO1lBQ0Y7WUFDQTtnQkFDRVYsSUFBSTtnQkFDSkMsT0FBTztnQkFDUEMsYUFBYTtnQkFDYkMsVUFBVTtnQkFDVkMsTUFBTTtvQkFBQztvQkFBUztvQkFBUTtpQkFBUztnQkFDakNDLFNBQVMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1FBOEJWLENBQUM7Z0JBQ0RDLFVBQVU7b0JBQ1JDLFFBQVE7b0JBQ1JDLGFBQWEsSUFBSUMsS0FBSztvQkFDdEJDLFVBQVU7Z0JBQ1o7WUFDRjtTQUNEO0lBQ0g7SUFFUVgsMkJBQTJDO1FBQ2pELE9BQU87WUFDTDtnQkFDRUMsSUFBSTtnQkFDSkMsT0FBTztnQkFDUEMsYUFBYTtnQkFDYkMsVUFBVTtnQkFDVkMsTUFBTTtvQkFBQztvQkFBTztpQkFBTTtnQkFDcEJDLFNBQVM7Z0JBQ1RDLFVBQVU7b0JBQ1JDLFFBQVE7b0JBQ1JDLGFBQWEsSUFBSUM7b0JBQ2pCQyxVQUFVO2dCQUNaO1lBQ0Y7U0FDRDtJQUNIO0lBRUEsTUFBTUMsb0JBQW9CQyxLQUFhLEVBQTJCO1FBQ2hFLE1BQU1DLFVBQVUsTUFBTSxJQUFJLENBQUNyQixrQkFBa0I7UUFFN0Msb0NBQW9DO1FBQ3BDLE1BQU1zQixjQUFjRixNQUFNRyxXQUFXLEdBQUdDLEtBQUssQ0FBQztRQUU5QyxPQUFPSCxRQUFRSSxNQUFNLENBQUNDLENBQUFBO1lBQ3BCLE1BQU1DLGlCQUFpQixDQUNyQkQsS0FBS2pCLEtBQUssR0FBRyxNQUNiaUIsS0FBS2hCLFdBQVcsR0FBRyxNQUNuQmdCLEtBQUtiLE9BQU8sR0FBRyxNQUNmYSxLQUFLZCxJQUFJLENBQUNnQixJQUFJLENBQUMsSUFBRyxFQUNsQkwsV0FBVztZQUViLE9BQU9ELFlBQVlPLElBQUksQ0FBQ0MsQ0FBQUEsT0FBUUgsZUFBZUksUUFBUSxDQUFDRDtRQUMxRDtJQUNGO0lBRUEsTUFBTUUsaUJBQXdDO1FBQzVDLE9BQU87WUFDTDtnQkFDRXhCLElBQUk7Z0JBQ0pDLE9BQU87Z0JBQ1B3QixLQUFLO2dCQUNMdkIsYUFBYTtnQkFDYkMsVUFBVTtnQkFDVkssYUFBYSxJQUFJQyxLQUFLO1lBQ3hCO1lBQ0E7Z0JBQ0VULElBQUk7Z0JBQ0pDLE9BQU87Z0JBQ1B3QixLQUFLO2dCQUNMdkIsYUFBYTtnQkFDYkMsVUFBVTtnQkFDVkssYUFBYSxJQUFJQyxLQUFLO1lBQ3hCO1lBQ0E7Z0JBQ0VULElBQUk7Z0JBQ0pDLE9BQU87Z0JBQ1B3QixLQUFLO2dCQUNMdkIsYUFBYTtnQkFDYkMsVUFBVTtnQkFDVkssYUFBYSxJQUFJQyxLQUFLO1lBQ3hCO1lBQ0E7Z0JBQ0VULElBQUk7Z0JBQ0pDLE9BQU87Z0JBQ1B3QixLQUFLO2dCQUNMdkIsYUFBYTtnQkFDYkMsVUFBVTtnQkFDVkssYUFBYSxJQUFJQyxLQUFLO1lBQ3hCO1NBQ0Q7SUFDSDs7YUFsUVFpQixpQkFBaUI7YUFDakJDLGlCQUFpQjtRQUV6QiwwQkFBMEI7YUFDbEJDLG9CQUFvQjtZQUMxQjtZQUNBO1lBQ0E7WUFDQTtTQUNEOztBQTBQSCIsInNvdXJjZXMiOlsid2VicGFjazovL3Rva3lvLW9wZW5kYXRhLWhhY2thdGhvbi8uL3NyYy9saWIvc2VydmljZXMvT3BlbkRhdGFTZXJ2aWNlLnRzP2ZmZmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IE9wZW5EYXRhSXRlbSwgRGF0YVNvdXJjZSB9IGZyb20gJ0AvdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgT3BlbkRhdGFTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBjYXRhbG9nQmFzZVVybCA9ICdodHRwczovL2NhdGFsb2cuZGF0YS5tZXRyby50b2t5by5sZy5qcCc7XG4gIHByaXZhdGUgc3RvcmFnZUJhc2VVcmwgPSAnaHR0cHM6Ly9kYXRhLnN0b3JhZ2UuZGF0YS5tZXRyby50b2t5by5sZy5qcCc7XG5cbiAgLy8g6IKy5YWQ44O75a2Q6IKy44Gm6Zai6YCj44Gu44OH44O844K/44K744OD44OISUTvvIhNVlDnlKjvvIlcbiAgcHJpdmF0ZSBjaGlsZGNhcmVEYXRhc2V0cyA9IFtcbiAgICAndDEzNDIxMWQwMDAwMDAwMDAxJywgLy8g5a2Q6IKy44Gm5pSv5o+05Yi25bqm44Os44K444K544OI44OqXG4gICAgJ3QxMzIwMTJkMDAwMDAwMDAzMicsIC8vIOWtpuerpeS/neiCsuaJgOS4gOimp1xuICAgICd0MTMxMTA1ZDAwMDAwMDAyMDknLCAvLyDlsI/opo/mqKHkv53ogrLmiYBcbiAgICAndDEzMjIxN2QzMTAwMDAwMDAxJywgLy8g5a2Q44Gp44KC6aOf5aCC5LiA6KanXG4gIF07XG5cbiAgYXN5bmMgZmV0Y2hDaGlsZGNhcmVEYXRhKCk6IFByb21pc2U8T3BlbkRhdGFJdGVtW10+IHtcbiAgICBjb25zdCBpdGVtczogT3BlbkRhdGFJdGVtW10gPSBbXTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBTYW1wbGUgZGF0YSBmb3IgTVZQICjlrp/pmpvjga7lrp/oo4Xjgafjga/lpJbpg6hBUEnjgYvjgonjg4fjg7zjgr/jgpLlj5blvpcpXG4gICAgICBjb25zdCBzYW1wbGVEYXRhID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVNhbXBsZUNoaWxkY2FyZURhdGEoKTtcbiAgICAgIGl0ZW1zLnB1c2goLi4uc2FtcGxlRGF0YSk7XG5cbiAgICAgIHJldHVybiBpdGVtcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2hpbGRjYXJlIGRhdGE6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0RmFsbGJhY2tDaGlsZGNhcmVEYXRhKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVNhbXBsZUNoaWxkY2FyZURhdGEoKTogUHJvbWlzZTxPcGVuRGF0YUl0ZW1bXT4ge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIGlkOiAnY2hpbGRjYXJlLTAwMScsXG4gICAgICAgIHRpdGxlOiAn5L+d6IKy5ZyS5YWl5ZyS55Sz6KuL44Gr44Gk44GE44GmJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICfmnbHkuqzpg73lhoXjga7kv53ogrLlnJLlhaXlnJLnlLPoq4vjga7miYvntprjgY3jgajlv4XopoHmm7jpoZ7jgavjgaTjgYTjgaYnLFxuICAgICAgICBjYXRlZ29yeTogJ2NoaWxkY2FyZScsXG4gICAgICAgIHRhZ3M6IFsn5L+d6IKy5ZySJywgJ+WFpeWckicsICfnlLPoq4snLCAn5omL57aa44GNJ10sXG4gICAgICAgIGNvbnRlbnQ6IGBcbuS/neiCsuWckuWFpeWckueUs+iri+OBruaJi+e2muOBjeOBq+OBpOOBhOOBplxuXG7jgJDnlLPoq4vmmYLmnJ/jgJFcbi0gNOaciOWFpeWcku+8muWJjeW5tDEw5pyI44CcMTHmnIhcbi0g6YCU5Lit5YWl5ZyS77ya5YWl5ZyS5biM5pyb5pyI44Gu5YmN5pyIMTXml6Xjgb7jgadcblxu44CQ5b+F6KaB5pu46aGe44CRXG4xLiDkv53ogrLlnJLnrYnliKnnlKjnlLPovrzmm7hcbjIuIOWwseWKtOiovOaYjuabuO+8iOS4oeimquWIhu+8iVxuMy4g6Kqy56iO6Ki85piO5pu4XG40LiDlgaXlurfoqLrmlq3mm7hcblxu44CQ55Sz6KuL5YWI44CRXG7lkITljLrluILnlLrmnZHjga7kv53ogrLoqrLjgb7jgZ/jga/lrZDjganjgoLlrrbluq3mlK/mj7Tjgrvjg7Pjgr/jg7xcblxu44CQ6YG46ICD5Z+65rqW44CRXG7kv53ogrLjga7lv4XopoHmgKfjga7luqblkIjjgYTjgavlv5zjgZjjgabjg53jgqTjg7Pjg4jliLbjgafpgbjogINcbi0g5bCx5Yq05pmC6ZaTXG4tIOWutuW6reeKtuazgVxuLSDjgZ3jga7ku5bkuovmg4Vcblxu6Kmz57Sw44Gv5ZCE6Ieq5rK75L2T44Gu44Ob44O844Og44Oa44O844K444KS44GU56K66KqN44GP44Gg44GV44GE44CCXG4gICAgICAgIGAsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgc291cmNlOiAn5p2x5Lqs6YO95a2Q6IKy44Gm5pSv5o+05Yi25bqm44Os44K444K544OI44OqJyxcbiAgICAgICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoJzIwMjQtMDEtMDEnKSxcbiAgICAgICAgICBsYW5ndWFnZTogJ2phJ1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJ2NoaWxkY2FyZS0wMDInLFxuICAgICAgICB0aXRsZTogJ+WtpuerpeS/neiCsu+8iOaUvuiqsuW+jOWFkOerpeOCr+ODqeODlu+8ieOBq+OBpOOBhOOBpicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn5bCP5a2m55Sf5ZCR44GR44Gu5a2m56ul5L+d6IKy44K144O844OT44K544Gr6Zai44GZ44KL5oOF5aCxJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdjaGlsZGNhcmUnLFxuICAgICAgICB0YWdzOiBbJ+WtpuerpeS/neiCsicsICflsI/lrabnlJ8nLCAn5pS+6Kqy5b6MJywgJ+WFkOerpeOCr+ODqeODliddLFxuICAgICAgICBjb250ZW50OiBgXG7lrabnq6Xkv53ogrLvvIjmlL7oqrLlvozlhZDnq6Xjgq/jg6njg5bvvInjgavjgaTjgYTjgaZcblxu44CQ5a++6LGh44CRXG7lsI/lraYx5bm055Sf44CcNuW5tOeUn++8iOiHquayu+S9k+OBq+OCiOOCiueVsOOBquOCi++8iVxuXG7jgJDliKnnlKjmmYLplpPjgJFcbi0g5bmz5pel77ya5pS+6Kqy5b6M44CcMTg6MDDvvIjlu7bplbfkv53ogrLjgYLjgorvvIlcbi0g5Zyf5puc5pel77yaODowMOOAnDE4OjAwXG4tIOmVt+acn+S8keaah+S4re+8mjg6MDDjgJwxODowMFxuXG7jgJDnlLPoq4vmlrnms5XjgJFcbjEuIOWQhOiHquayu+S9k+OBruWFkOerpeiqsuetieOBq+eUs+iri1xuMi4g5bCx5Yq06Ki85piO5pu4562J44Gu5o+Q5Ye6XG4zLiDpnaLoq4fjg7vlr6nmn7tcblxu44CQ5Yip55So5paZ6YeR44CRXG7mnIjpoY01LDAwMOWGhuOAnDE1LDAwMOWGhueoi+W6pu+8iOiHquayu+S9k+ODu+S4luW4r+WPjuWFpeOBq+OCiOOCiueVsOOBquOCi++8iVxuXG7jgJDjgrXjg7zjg5PjgrnlhoXlrrnjgJFcbi0g5a6/6aGM5oyH5bCOXG4tIOWklumBiuOBs+ODu+WupOWGhemBiuOBs1xuLSDjgYrjgoTjgaTmj5Dkvptcbi0g6KGM5LqL44O744Kk44OZ44Oz44OIXG5cbuips+e0sOOBr+WQhOWMuuW4gueUuuadkeOBq+OBiuWVj+OBhOWQiOOCj+OBm+OBj+OBoOOBleOBhOOAglxuICAgICAgICBgLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHNvdXJjZTogJ+adseS6rOmDveWtpuerpeS/neiCsuaJgOS4gOimpycsXG4gICAgICAgICAgbGFzdFVwZGF0ZWQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICAgICAgbGFuZ3VhZ2U6ICdqYSdcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdjaGlsZGNhcmUtMDAzJyxcbiAgICAgICAgdGl0bGU6ICflrZDogrLjgabmlK/mj7TliLbluqbjg7vmiYvlvZPjgavjgaTjgYTjgaYnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ+adseS6rOmDveOBruWtkOiCsuOBpuS4luW4r+WQkeOBkeaUr+aPtOWItuW6puOBqOWQhOeoruaJi+W9kycsXG4gICAgICAgIGNhdGVnb3J5OiAnY2hpbGRjYXJlJyxcbiAgICAgICAgdGFnczogWyfmlK/mj7TliLbluqYnLCAn5omL5b2TJywgJ+ijnOWKqemHkScsICfliqnmiJAnXSxcbiAgICAgICAgY29udGVudDogYFxu5a2Q6IKy44Gm5pSv5o+05Yi25bqm44O75omL5b2T44Gr44Gk44GE44GmXG5cbuOAkOWFkOerpeaJi+W9k+OAkVxuLSAw5q2z44Cc5Lit5a2m5qCh5Y2S5qWt44G+44GnXG4tIOaciOmhje+8mjPmrbPmnKrmuoAxNSwwMDDlhobjgIEz5q2z5Lul5LiK5bCP5a2m5qCh5L+u5LqG5YmNMTAsMDAw5YaG77yI56ysM+WtkOS7pemZjTE1LDAwMOWGhu+8ieOAgeS4reWtpueUnzEwLDAwMOWGhlxuXG7jgJDlhZDnq6XogrLmiJDmiYvlvZPvvIjmnbHkuqzpg73vvInjgJFcbi0g44Gy44Go44KK6Kaq5LiW5biv562J44GM5a++6LGhXG4tIOaciOmhjTEzLDUwMOWGhu+8iDE45q2z44G+44Gn77yJXG5cbuOAkOS5s+W5vOWFkOWMu+eZguiyu+WKqeaIkOOAkVxuLSDkuK3lrabmoKEz5bm055Sf44G+44Gn5Yy755mC6LK754Sh5paZ77yI5omA5b6X5Yi26ZmQ44GC44KK77yJXG5cbuOAkOS/neiCsuaWmeeEoeWEn+WMluOAkVxuLSAz44CcNeats+WFkO+8muiqjeWPr+S/neiCsuWckuetieOBruWIqeeUqOaWmeeEoeaWmVxuLSAw44CcMuats+WFkO+8muS9j+awkeeojumdnuiqsueojuS4luW4r+OBruOBv+eEoeaWmVxuXG7jgJDjgZ3jga7ku5bmlK/mj7TjgJFcbi0g5Ye655Sj6IKy5YWQ5LiA5pmC6YeR77yaNTDkuIflhoZcbi0g55Sj5YmN55Sj5b6M44OY44Or44OR44O85rS+6YGjXG4tIOS4gOaZguS/neiCsuOCteODvOODk+OCuVxuLSDlrZDogrLjgabjgbLjgo3jgbDkuovmpa1cblxu55Sz6KuL5pa55rOV44KE6Kmz57Sw5p2h5Lu244Gv5ZCE5Yy65biC55S65p2R56qT5Y+j44Gr44GU55u46KuH44GP44Gg44GV44GE44CCXG4gICAgICAgIGAsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgc291cmNlOiAn5p2x5Lqs6YO95a2Q6IKy44Gm5pSv5o+05Yi25bqm44Os44K444K544OI44OqJyxcbiAgICAgICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoJzIwMjQtMDEtMDEnKSxcbiAgICAgICAgICBsYW5ndWFnZTogJ2phJ1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJ2NoaWxkY2FyZS0wMDQnLFxuICAgICAgICB0aXRsZTogJ+WtkOOBqeOCgumjn+WgguODu+WcsOWfn+aUr+aPtOOBq+OBpOOBhOOBpicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn5Zyw5Z+f44Gu5a2Q44Gp44KC6aOf5aCC44Go5a2Q6IKy44Gm5pSv5o+044K144O844OT44K5JyxcbiAgICAgICAgY2F0ZWdvcnk6ICdjaGlsZGNhcmUnLFxuICAgICAgICB0YWdzOiBbJ+WtkOOBqeOCgumjn+WggicsICflnLDln5/mlK/mj7QnLCAn44Kz44Of44Ol44OL44OG44KjJ10sXG4gICAgICAgIGNvbnRlbnQ6IGBcbuWtkOOBqeOCgumjn+WgguODu+WcsOWfn+aUr+aPtOOBq+OBpOOBhOOBplxuXG7jgJDlrZDjganjgoLpo5/loILjgajjga/jgJFcbuWcsOWfn+OBruWtkOOBqeOCguOBn+OBoeOBjOeEoeaWmeOBvuOBn+OBr+S9juS+oeagvOOBp+mjn+S6i+OCkuWPluOCjOOCi+WgtOaJgFxuXG7jgJDkuLvjgarmtLvli5XjgJFcbi0g6aOf5LqL5o+Q5L6b77yI5pyIMeOAnDLlm57nqIvluqbvvIlcbi0g5a2m57+S5pSv5o+0XG4tIOmBiuOBs+ODu+S6pOa1gea0u+WLlVxuLSDkv53orbfogIXlkJHjgZHnm7joq4dcblxu44CQ5Yip55So5pa55rOV44CRXG4tIOS6i+WJjeeUs+i+vOS4jeimge+8iOW9k+aXpeWPguWKoE9L77yJXG4tIOWtkOOBqeOCguOBr+eEoeaWmeOAgeWkp+S6uuOBrzMwMOWGhueoi+W6plxuLSDlnLDln5/kvY/msJHjgarjgonoqrDjgafjgoLlj4LliqDlj6/og71cblxu44CQ5p2x5Lqs6YO95YaF44Gu5Li744Gq5a2Q44Gp44KC6aOf5aCC44CRXG4tIOaWsOWuv+WMuu+8mue0hDE1566H5omAXG4tIOS4lueUsOiwt+WMuu+8mue0hDMw566H5omAXG4tIOe3tOmmrOWMuu+8mue0hDIw566H5omAXG4tIOOBneOBruS7luWQhOWMuuOBq+ikh+aVsOeuh+aJgFxuXG7jgJDjgZ3jga7ku5blnLDln5/mlK/mj7TjgJFcbi0g5a2Q6IKy44Gm44K144Ot44OzXG4tIOiCsuWFkOebuOirh1xuLSDkuIDmmYLpoJDjgYvjgopcbi0g6Kaq5a2Q5ZCR44GR44Kk44OZ44Oz44OIXG5cbuacgOaWsOaDheWgseOBr+WQhOiHquayu+S9k+ODm+ODvOODoOODmuODvOOCuOOBvuOBn+OBr+WcsOWfn+WtkOiCsuOBpuaUr+aPtOOCu+ODs+OCv+ODvOOBq+OBiuWVj+OBhOWQiOOCj+OBm+OBj+OBoOOBleOBhOOAglxuICAgICAgICBgLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHNvdXJjZTogJ+adseS6rOmDveWtkOOBqeOCgumjn+WgguS4gOimpycsXG4gICAgICAgICAgbGFzdFVwZGF0ZWQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICAgICAgbGFuZ3VhZ2U6ICdqYSdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIF07XG4gIH1cblxuICBwcml2YXRlIGdldEZhbGxiYWNrQ2hpbGRjYXJlRGF0YSgpOiBPcGVuRGF0YUl0ZW1bXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdmYWxsYmFjay0wMDEnLFxuICAgICAgICB0aXRsZTogJ+OCiOOBj+OBguOCi+izquWVj++8muS/neiCsuWckuOBq+OBpOOBhOOBpicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn5L+d6IKy5ZyS44Gr6Zai44GZ44KL44KI44GP44GC44KL6LOq5ZWP44Go5Zue562UJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdjaGlsZGNhcmUnLFxuICAgICAgICB0YWdzOiBbJ0ZBUScsICfkv53ogrLlnJInXSxcbiAgICAgICAgY29udGVudDogJ+S/neiCsuWckuOBrueUs+i+vOOBv+OChOWIqeeUqOOBq+mWouOBmeOCi+WfuuacrOeahOOBquaDheWgseOCkuaPkOS+m+OBl+OBpuOBhOOBvuOBmeOAguips+e0sOOBr+acgOWvhOOCiuOBruWMuuW4gueUuuadkeeqk+WPo+OBq+OBiuWVj+OBhOWQiOOCj+OBm+OBj+OBoOOBleOBhOOAgicsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgc291cmNlOiAn44K344K544OG44Og5YaF6JS144OH44O844K/JyxcbiAgICAgICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoKSxcbiAgICAgICAgICBsYW5ndWFnZTogJ2phJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgXTtcbiAgfVxuXG4gIGFzeW5jIHNlYXJjaENoaWxkY2FyZUluZm8ocXVlcnk6IHN0cmluZyk6IFByb21pc2U8T3BlbkRhdGFJdGVtW10+IHtcbiAgICBjb25zdCBhbGxEYXRhID0gYXdhaXQgdGhpcy5mZXRjaENoaWxkY2FyZURhdGEoKTtcbiAgICBcbiAgICAvLyBTaW1wbGUgdGV4dCBzZWFyY2ggaW1wbGVtZW50YXRpb25cbiAgICBjb25zdCBzZWFyY2hUZXJtcyA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCkuc3BsaXQoJyAnKTtcbiAgICBcbiAgICByZXR1cm4gYWxsRGF0YS5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICBjb25zdCBzZWFyY2hhYmxlVGV4dCA9IChcbiAgICAgICAgaXRlbS50aXRsZSArICcgJyArIFxuICAgICAgICBpdGVtLmRlc2NyaXB0aW9uICsgJyAnICsgXG4gICAgICAgIGl0ZW0uY29udGVudCArICcgJyArIFxuICAgICAgICBpdGVtLnRhZ3Muam9pbignICcpXG4gICAgICApLnRvTG93ZXJDYXNlKCk7XG4gICAgICBcbiAgICAgIHJldHVybiBzZWFyY2hUZXJtcy5zb21lKHRlcm0gPT4gc2VhcmNoYWJsZVRleHQuaW5jbHVkZXModGVybSkpO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YVNvdXJjZXMoKTogUHJvbWlzZTxEYXRhU291cmNlW10+IHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICBpZDogJ3Rva3lvLWNoaWxkY2FyZS1yZWdpc3RyeScsXG4gICAgICAgIHRpdGxlOiAn5p2x5Lqs44OH44K444K/44OrMjAzMOODk+OCuOODp+ODs++8iOOBk+OBqeOCgkRY77yJ5a2Q6IKy44Gm5pSv5o+05Yi25bqm44Os44K444K544OI44OqJyxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9jYXRhbG9nLmRhdGEubWV0cm8udG9reW8ubGcuanAvZGF0YXNldC90MTM0MjExZDAwMDAwMDAwMDEnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ+adseS6rOmDveOBruWtkOiCsuOBpuaUr+aPtOWItuW6puOBq+mWouOBmeOCi+WMheaLrOeahOOBquODh+ODvOOCv+ODmeODvOOCuScsXG4gICAgICAgIGNhdGVnb3J5OiAnY2hpbGRjYXJlJyxcbiAgICAgICAgbGFzdFVwZGF0ZWQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJylcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnYWZ0ZXJzY2hvb2wtY2FyZScsXG4gICAgICAgIHRpdGxlOiAn5a2m56ul5L+d6IKy5omA5LiA6KanJyxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9jYXRhbG9nLmRhdGEubWV0cm8udG9reW8ubGcuanAvZGF0YXNldC90MTMyMDEyZDAwMDAwMDAwMzInLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ+adseS6rOmDveWGheOBruWtpuerpeS/neiCsuaJgOOBruips+e0sOaDheWgsScsXG4gICAgICAgIGNhdGVnb3J5OiAnY2hpbGRjYXJlJyxcbiAgICAgICAgbGFzdFVwZGF0ZWQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJylcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnc21hbGwtbnVyc2VyaWVzJyxcbiAgICAgICAgdGl0bGU6ICflsI/opo/mqKHkv53ogrLmiYAnLFxuICAgICAgICB1cmw6ICdodHRwczovL2NhdGFsb2cuZGF0YS5tZXRyby50b2t5by5sZy5qcC9kYXRhc2V0L3QxMzExMDVkMDAwMDAwMDIwOScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn5bCP6KaP5qih5L+d6IKy5omA44Gu5omA5Zyo5Zyw44Go6Kmz57Sw5oOF5aCxJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdjaGlsZGNhcmUnLFxuICAgICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoJzIwMjQtMDEtMDEnKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdraWRzLWNhZmV0ZXJpYScsXG4gICAgICAgIHRpdGxlOiAn5a2Q44Gp44KC6aOf5aCC5LiA6KanJyxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9jYXRhbG9nLmRhdGEubWV0cm8udG9reW8ubGcuanAvZGF0YXNldC90MTMyMjE3ZDMxMDAwMDAwMDEnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ+WcsOWfn+OBruWtkOOBqeOCgumjn+WgguOBrumWi+WCrOaDheWgsScsXG4gICAgICAgIGNhdGVnb3J5OiAnY2hpbGRjYXJlJyxcbiAgICAgICAgbGFzdFVwZGF0ZWQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJylcbiAgICAgIH1cbiAgICBdO1xuICB9XG59Il0sIm5hbWVzIjpbIk9wZW5EYXRhU2VydmljZSIsImZldGNoQ2hpbGRjYXJlRGF0YSIsIml0ZW1zIiwic2FtcGxlRGF0YSIsImdlbmVyYXRlU2FtcGxlQ2hpbGRjYXJlRGF0YSIsInB1c2giLCJlcnJvciIsImNvbnNvbGUiLCJnZXRGYWxsYmFja0NoaWxkY2FyZURhdGEiLCJpZCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsInRhZ3MiLCJjb250ZW50IiwibWV0YWRhdGEiLCJzb3VyY2UiLCJsYXN0VXBkYXRlZCIsIkRhdGUiLCJsYW5ndWFnZSIsInNlYXJjaENoaWxkY2FyZUluZm8iLCJxdWVyeSIsImFsbERhdGEiLCJzZWFyY2hUZXJtcyIsInRvTG93ZXJDYXNlIiwic3BsaXQiLCJmaWx0ZXIiLCJpdGVtIiwic2VhcmNoYWJsZVRleHQiLCJqb2luIiwic29tZSIsInRlcm0iLCJpbmNsdWRlcyIsImdldERhdGFTb3VyY2VzIiwidXJsIiwiY2F0YWxvZ0Jhc2VVcmwiLCJzdG9yYWdlQmFzZVVybCIsImNoaWxkY2FyZURhdGFzZXRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/services/OpenDataService.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/services/VectorSearchService.ts":
/*!*************************************************!*\
  !*** ./src/lib/services/VectorSearchService.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VectorSearchService: () => (/* binding */ VectorSearchService)\n/* harmony export */ });\n/* harmony import */ var _GeminiService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GeminiService */ \"(rsc)/./src/lib/services/GeminiService.ts\");\n/* harmony import */ var _OpenDataService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./OpenDataService */ \"(rsc)/./src/lib/services/OpenDataService.ts\");\n\n\nclass VectorSearchService {\n    constructor(){\n        this.indexedItems = new Map();\n        this.geminiService = new _GeminiService__WEBPACK_IMPORTED_MODULE_0__.GeminiService();\n        this.openDataService = new _OpenDataService__WEBPACK_IMPORTED_MODULE_1__.OpenDataService();\n    }\n    async initializeIndex() {\n        try {\n            const items = await this.openDataService.fetchChildcareData();\n            for (const item of items){\n                if (!item.embeddings) {\n                    // Generate embeddings for content\n                    const textToEmbed = `${item.title} ${item.description} ${item.content}`;\n                    try {\n                        item.embeddings = await this.geminiService.embedText(textToEmbed);\n                    } catch (error) {\n                        console.error(`Failed to generate embeddings for item ${item.id}:`, error);\n                    // Continue without embeddings\n                    }\n                }\n                this.indexedItems.set(item.id, item);\n            }\n            console.log(`Initialized vector index with ${this.indexedItems.size} items`);\n        } catch (error) {\n            console.error(\"Error initializing vector index:\", error);\n            throw error;\n        }\n    }\n    async search(query) {\n        try {\n            let results = [];\n            // If we have embeddings, use vector similarity search\n            if (query.text) {\n                try {\n                    const queryEmbedding = await this.geminiService.embedText(query.text);\n                    results = await this.vectorSimilaritySearch(queryEmbedding, query.limit || 10);\n                } catch (error) {\n                    console.error(\"Vector search failed, falling back to text search:\", error);\n                    results = await this.textSearch(query.text, query.limit || 10);\n                }\n            } else {\n                // Fallback to getting all items\n                results = Array.from(this.indexedItems.values()).slice(0, query.limit || 10);\n            }\n            // Filter by category if specified\n            if (query.category) {\n                results = results.filter((item)=>item.category === query.category);\n            }\n            // Filter by language if specified\n            if (query.language) {\n                results = results.filter((item)=>item.metadata.language === query.language || item.metadata.language === \"ja\" // Default to Japanese if no specific language\n                );\n            }\n            return {\n                items: results,\n                total: results.length,\n                query: query.text || \"\"\n            };\n        } catch (error) {\n            console.error(\"Error in vector search:\", error);\n            // Return fallback results\n            return {\n                items: await this.getFallbackResults(query),\n                total: 1,\n                query: query.text || \"\"\n            };\n        }\n    }\n    async vectorSimilaritySearch(queryEmbedding, limit) {\n        const similarities = [];\n        for (const item of Array.from(this.indexedItems.values())){\n            if (item.embeddings && item.embeddings.length > 0) {\n                const similarity = this.cosineSimilarity(queryEmbedding, item.embeddings);\n                similarities.push({\n                    item,\n                    similarity\n                });\n            }\n        }\n        // Sort by similarity (descending) and return top results\n        similarities.sort((a, b)=>b.similarity - a.similarity);\n        return similarities.slice(0, limit).map((s)=>s.item);\n    }\n    async textSearch(query, limit) {\n        const searchTerms = query.toLowerCase().split(\" \");\n        const results = [];\n        for (const item of Array.from(this.indexedItems.values())){\n            const searchableText = (item.title + \" \" + item.description + \" \" + item.content + \" \" + item.tags.join(\" \")).toLowerCase();\n            let score = 0;\n            for (const term of searchTerms){\n                if (searchableText.includes(term)) {\n                    score += 1;\n                    // Boost score for matches in title\n                    if (item.title.toLowerCase().includes(term)) {\n                        score += 2;\n                    }\n                    // Boost score for matches in tags\n                    if (item.tags.some((tag)=>tag.toLowerCase().includes(term))) {\n                        score += 1;\n                    }\n                }\n            }\n            if (score > 0) {\n                results.push({\n                    item,\n                    score\n                });\n            }\n        }\n        // Sort by score (descending) and return top results\n        results.sort((a, b)=>b.score - a.score);\n        return results.slice(0, limit).map((r)=>r.item);\n    }\n    cosineSimilarity(a, b) {\n        if (a.length !== b.length) {\n            return 0;\n        }\n        let dotProduct = 0;\n        let normA = 0;\n        let normB = 0;\n        for(let i = 0; i < a.length; i++){\n            dotProduct += a[i] * b[i];\n            normA += a[i] * a[i];\n            normB += b[i] * b[i];\n        }\n        if (normA === 0 || normB === 0) {\n            return 0;\n        }\n        return dotProduct / (Math.sqrt(normA) * Math.sqrt(normB));\n    }\n    async getFallbackResults(query) {\n        // Return a basic fallback result\n        return [\n            {\n                id: \"fallback-search\",\n                title: \"お探しの情報について\",\n                description: \"ご質問にお答えできるよう努めます\",\n                category: \"general\",\n                tags: [\n                    \"案内\"\n                ],\n                content: `申し訳ございませんが、「${query.text}」に関する具体的な情報が見つかりませんでした。\\n\\n東京都の子育て支援に関するご質問でしたら、以下の方法でより詳しい情報を得ることができます：\\n\\n1. 各区市町村の子ども家庭支援センター\\n2. 東京都公式ホームページ\\n3. 子育て応援とうきょうパスポート事業\\n\\n具体的な手続きや制度についてお知りになりたい場合は、お住まいの区市町村窓口にお問い合わせください。`,\n                metadata: {\n                    source: \"システム\",\n                    lastUpdated: new Date(),\n                    language: query.language || \"ja\"\n                }\n            }\n        ];\n    }\n    async getRecommendations(currentQuery, limit = 3) {\n        // Simple recommendation based on popular/featured content\n        const allItems = Array.from(this.indexedItems.values());\n        // Return random selection for now - in production, this would be based on usage patterns\n        const shuffled = allItems.sort(()=>0.5 - Math.random());\n        return shuffled.slice(0, limit);\n    }\n    getStats() {\n        const categoryCounts = {};\n        for (const item of Array.from(this.indexedItems.values())){\n            categoryCounts[item.category] = (categoryCounts[item.category] || 0) + 1;\n        }\n        return {\n            totalItems: this.indexedItems.size,\n            categoryCounts\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3NlcnZpY2VzL1ZlY3RvclNlYXJjaFNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ2dEO0FBQ0k7QUFFN0MsTUFBTUU7SUFLWEMsYUFBYzthQUZOQyxlQUEwQyxJQUFJQztRQUdwRCxJQUFJLENBQUNDLGFBQWEsR0FBRyxJQUFJTix5REFBYUE7UUFDdEMsSUFBSSxDQUFDTyxlQUFlLEdBQUcsSUFBSU4sNkRBQWVBO0lBQzVDO0lBRUEsTUFBTU8sa0JBQWlDO1FBQ3JDLElBQUk7WUFDRixNQUFNQyxRQUFRLE1BQU0sSUFBSSxDQUFDRixlQUFlLENBQUNHLGtCQUFrQjtZQUUzRCxLQUFLLE1BQU1DLFFBQVFGLE1BQU87Z0JBQ3hCLElBQUksQ0FBQ0UsS0FBS0MsVUFBVSxFQUFFO29CQUNwQixrQ0FBa0M7b0JBQ2xDLE1BQU1DLGNBQWMsQ0FBQyxFQUFFRixLQUFLRyxLQUFLLENBQUMsQ0FBQyxFQUFFSCxLQUFLSSxXQUFXLENBQUMsQ0FBQyxFQUFFSixLQUFLSyxPQUFPLENBQUMsQ0FBQztvQkFDdkUsSUFBSTt3QkFDRkwsS0FBS0MsVUFBVSxHQUFHLE1BQU0sSUFBSSxDQUFDTixhQUFhLENBQUNXLFNBQVMsQ0FBQ0o7b0JBQ3ZELEVBQUUsT0FBT0ssT0FBTzt3QkFDZEMsUUFBUUQsS0FBSyxDQUFDLENBQUMsdUNBQXVDLEVBQUVQLEtBQUtTLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRUY7b0JBQ3BFLDhCQUE4QjtvQkFDaEM7Z0JBQ0Y7Z0JBQ0EsSUFBSSxDQUFDZCxZQUFZLENBQUNpQixHQUFHLENBQUNWLEtBQUtTLEVBQUUsRUFBRVQ7WUFDakM7WUFFQVEsUUFBUUcsR0FBRyxDQUFDLENBQUMsOEJBQThCLEVBQUUsSUFBSSxDQUFDbEIsWUFBWSxDQUFDbUIsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUM3RSxFQUFFLE9BQU9MLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLG9DQUFvQ0E7WUFDbEQsTUFBTUE7UUFDUjtJQUNG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RSxLQUFLeUIsUUFBUSxDQUFDLEdBQUcsQ0FBQzJDLGNBQWMsQ0FBQ3BFLEtBQUt5QixRQUFRLENBQUMsSUFBSSxLQUFLO1FBQ3pFO1FBRUEsT0FBTztZQUNMNEMsWUFBWSxJQUFJLENBQUM1RSxZQUFZLENBQUNtQixJQUFJO1lBQ2xDd0Q7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2t5by1vcGVuZGF0YS1oYWNrYXRob24vLi9zcmMvbGliL3NlcnZpY2VzL1ZlY3RvclNlYXJjaFNlcnZpY2UudHM/NDMyNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPcGVuRGF0YUl0ZW0sIFNlYXJjaFF1ZXJ5LCBTZWFyY2hSZXN1bHQgfSBmcm9tICdAL3R5cGVzJztcbmltcG9ydCB7IEdlbWluaVNlcnZpY2UgfSBmcm9tICcuL0dlbWluaVNlcnZpY2UnO1xuaW1wb3J0IHsgT3BlbkRhdGFTZXJ2aWNlIH0gZnJvbSAnLi9PcGVuRGF0YVNlcnZpY2UnO1xuXG5leHBvcnQgY2xhc3MgVmVjdG9yU2VhcmNoU2VydmljZSB7XG4gIHByaXZhdGUgZ2VtaW5pU2VydmljZTogR2VtaW5pU2VydmljZTtcbiAgcHJpdmF0ZSBvcGVuRGF0YVNlcnZpY2U6IE9wZW5EYXRhU2VydmljZTtcbiAgcHJpdmF0ZSBpbmRleGVkSXRlbXM6IE1hcDxzdHJpbmcsIE9wZW5EYXRhSXRlbT4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5nZW1pbmlTZXJ2aWNlID0gbmV3IEdlbWluaVNlcnZpY2UoKTtcbiAgICB0aGlzLm9wZW5EYXRhU2VydmljZSA9IG5ldyBPcGVuRGF0YVNlcnZpY2UoKTtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemVJbmRleCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCB0aGlzLm9wZW5EYXRhU2VydmljZS5mZXRjaENoaWxkY2FyZURhdGEoKTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGlmICghaXRlbS5lbWJlZGRpbmdzKSB7XG4gICAgICAgICAgLy8gR2VuZXJhdGUgZW1iZWRkaW5ncyBmb3IgY29udGVudFxuICAgICAgICAgIGNvbnN0IHRleHRUb0VtYmVkID0gYCR7aXRlbS50aXRsZX0gJHtpdGVtLmRlc2NyaXB0aW9ufSAke2l0ZW0uY29udGVudH1gO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpdGVtLmVtYmVkZGluZ3MgPSBhd2FpdCB0aGlzLmdlbWluaVNlcnZpY2UuZW1iZWRUZXh0KHRleHRUb0VtYmVkKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGdlbmVyYXRlIGVtYmVkZGluZ3MgZm9yIGl0ZW0gJHtpdGVtLmlkfTpgLCBlcnJvcik7XG4gICAgICAgICAgICAvLyBDb250aW51ZSB3aXRob3V0IGVtYmVkZGluZ3NcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbmRleGVkSXRlbXMuc2V0KGl0ZW0uaWQsIGl0ZW0pO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhgSW5pdGlhbGl6ZWQgdmVjdG9yIGluZGV4IHdpdGggJHt0aGlzLmluZGV4ZWRJdGVtcy5zaXplfSBpdGVtc2ApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgdmVjdG9yIGluZGV4OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNlYXJjaChxdWVyeTogU2VhcmNoUXVlcnkpOiBQcm9taXNlPFNlYXJjaFJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzdWx0czogT3BlbkRhdGFJdGVtW10gPSBbXTtcblxuICAgICAgLy8gSWYgd2UgaGF2ZSBlbWJlZGRpbmdzLCB1c2UgdmVjdG9yIHNpbWlsYXJpdHkgc2VhcmNoXG4gICAgICBpZiAocXVlcnkudGV4dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHF1ZXJ5RW1iZWRkaW5nID0gYXdhaXQgdGhpcy5nZW1pbmlTZXJ2aWNlLmVtYmVkVGV4dChxdWVyeS50ZXh0KTtcbiAgICAgICAgICByZXN1bHRzID0gYXdhaXQgdGhpcy52ZWN0b3JTaW1pbGFyaXR5U2VhcmNoKHF1ZXJ5RW1iZWRkaW5nLCBxdWVyeS5saW1pdCB8fCAxMCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignVmVjdG9yIHNlYXJjaCBmYWlsZWQsIGZhbGxpbmcgYmFjayB0byB0ZXh0IHNlYXJjaDonLCBlcnJvcik7XG4gICAgICAgICAgcmVzdWx0cyA9IGF3YWl0IHRoaXMudGV4dFNlYXJjaChxdWVyeS50ZXh0LCBxdWVyeS5saW1pdCB8fCAxMCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIGdldHRpbmcgYWxsIGl0ZW1zXG4gICAgICAgIHJlc3VsdHMgPSBBcnJheS5mcm9tKHRoaXMuaW5kZXhlZEl0ZW1zLnZhbHVlcygpKS5zbGljZSgwLCBxdWVyeS5saW1pdCB8fCAxMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZpbHRlciBieSBjYXRlZ29yeSBpZiBzcGVjaWZpZWRcbiAgICAgIGlmIChxdWVyeS5jYXRlZ29yeSkge1xuICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIoaXRlbSA9PiBpdGVtLmNhdGVnb3J5ID09PSBxdWVyeS5jYXRlZ29yeSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZpbHRlciBieSBsYW5ndWFnZSBpZiBzcGVjaWZpZWRcbiAgICAgIGlmIChxdWVyeS5sYW5ndWFnZSkge1xuICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIoaXRlbSA9PiBcbiAgICAgICAgICBpdGVtLm1ldGFkYXRhLmxhbmd1YWdlID09PSBxdWVyeS5sYW5ndWFnZSB8fCBcbiAgICAgICAgICBpdGVtLm1ldGFkYXRhLmxhbmd1YWdlID09PSAnamEnIC8vIERlZmF1bHQgdG8gSmFwYW5lc2UgaWYgbm8gc3BlY2lmaWMgbGFuZ3VhZ2VcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXRlbXM6IHJlc3VsdHMsXG4gICAgICAgIHRvdGFsOiByZXN1bHRzLmxlbmd0aCxcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LnRleHQgfHwgJydcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHZlY3RvciBzZWFyY2g6JywgZXJyb3IpO1xuICAgICAgLy8gUmV0dXJuIGZhbGxiYWNrIHJlc3VsdHNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGl0ZW1zOiBhd2FpdCB0aGlzLmdldEZhbGxiYWNrUmVzdWx0cyhxdWVyeSksXG4gICAgICAgIHRvdGFsOiAxLFxuICAgICAgICBxdWVyeTogcXVlcnkudGV4dCB8fCAnJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHZlY3RvclNpbWlsYXJpdHlTZWFyY2gocXVlcnlFbWJlZGRpbmc6IG51bWJlcltdLCBsaW1pdDogbnVtYmVyKTogUHJvbWlzZTxPcGVuRGF0YUl0ZW1bXT4ge1xuICAgIGNvbnN0IHNpbWlsYXJpdGllczogeyBpdGVtOiBPcGVuRGF0YUl0ZW07IHNpbWlsYXJpdHk6IG51bWJlciB9W10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBBcnJheS5mcm9tKHRoaXMuaW5kZXhlZEl0ZW1zLnZhbHVlcygpKSkge1xuICAgICAgaWYgKGl0ZW0uZW1iZWRkaW5ncyAmJiBpdGVtLmVtYmVkZGluZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBzaW1pbGFyaXR5ID0gdGhpcy5jb3NpbmVTaW1pbGFyaXR5KHF1ZXJ5RW1iZWRkaW5nLCBpdGVtLmVtYmVkZGluZ3MpO1xuICAgICAgICBzaW1pbGFyaXRpZXMucHVzaCh7IGl0ZW0sIHNpbWlsYXJpdHkgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU29ydCBieSBzaW1pbGFyaXR5IChkZXNjZW5kaW5nKSBhbmQgcmV0dXJuIHRvcCByZXN1bHRzXG4gICAgc2ltaWxhcml0aWVzLnNvcnQoKGEsIGIpID0+IGIuc2ltaWxhcml0eSAtIGEuc2ltaWxhcml0eSk7XG4gICAgcmV0dXJuIHNpbWlsYXJpdGllcy5zbGljZSgwLCBsaW1pdCkubWFwKHMgPT4gcy5pdGVtKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdGV4dFNlYXJjaChxdWVyeTogc3RyaW5nLCBsaW1pdDogbnVtYmVyKTogUHJvbWlzZTxPcGVuRGF0YUl0ZW1bXT4ge1xuICAgIGNvbnN0IHNlYXJjaFRlcm1zID0gcXVlcnkudG9Mb3dlckNhc2UoKS5zcGxpdCgnICcpO1xuICAgIGNvbnN0IHJlc3VsdHM6IHsgaXRlbTogT3BlbkRhdGFJdGVtOyBzY29yZTogbnVtYmVyIH1bXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIEFycmF5LmZyb20odGhpcy5pbmRleGVkSXRlbXMudmFsdWVzKCkpKSB7XG4gICAgICBjb25zdCBzZWFyY2hhYmxlVGV4dCA9IChcbiAgICAgICAgaXRlbS50aXRsZSArICcgJyArIFxuICAgICAgICBpdGVtLmRlc2NyaXB0aW9uICsgJyAnICsgXG4gICAgICAgIGl0ZW0uY29udGVudCArICcgJyArIFxuICAgICAgICBpdGVtLnRhZ3Muam9pbignICcpXG4gICAgICApLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgIGxldCBzY29yZSA9IDA7XG4gICAgICBmb3IgKGNvbnN0IHRlcm0gb2Ygc2VhcmNoVGVybXMpIHtcbiAgICAgICAgaWYgKHNlYXJjaGFibGVUZXh0LmluY2x1ZGVzKHRlcm0pKSB7XG4gICAgICAgICAgc2NvcmUgKz0gMTtcbiAgICAgICAgICAvLyBCb29zdCBzY29yZSBmb3IgbWF0Y2hlcyBpbiB0aXRsZVxuICAgICAgICAgIGlmIChpdGVtLnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGVybSkpIHtcbiAgICAgICAgICAgIHNjb3JlICs9IDI7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEJvb3N0IHNjb3JlIGZvciBtYXRjaGVzIGluIHRhZ3NcbiAgICAgICAgICBpZiAoaXRlbS50YWdzLnNvbWUoKHRhZzogc3RyaW5nKSA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZXJtKSkpIHtcbiAgICAgICAgICAgIHNjb3JlICs9IDE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzY29yZSA+IDApIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHsgaXRlbSwgc2NvcmUgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU29ydCBieSBzY29yZSAoZGVzY2VuZGluZykgYW5kIHJldHVybiB0b3AgcmVzdWx0c1xuICAgIHJlc3VsdHMuc29ydCgoYSwgYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpO1xuICAgIHJldHVybiByZXN1bHRzLnNsaWNlKDAsIGxpbWl0KS5tYXAociA9PiByLml0ZW0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjb3NpbmVTaW1pbGFyaXR5KGE6IG51bWJlcltdLCBiOiBudW1iZXJbXSk6IG51bWJlciB7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgbGV0IGRvdFByb2R1Y3QgPSAwO1xuICAgIGxldCBub3JtQSA9IDA7XG4gICAgbGV0IG5vcm1CID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgZG90UHJvZHVjdCArPSBhW2ldICogYltpXTtcbiAgICAgIG5vcm1BICs9IGFbaV0gKiBhW2ldO1xuICAgICAgbm9ybUIgKz0gYltpXSAqIGJbaV07XG4gICAgfVxuXG4gICAgaWYgKG5vcm1BID09PSAwIHx8IG5vcm1CID09PSAwKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gZG90UHJvZHVjdCAvIChNYXRoLnNxcnQobm9ybUEpICogTWF0aC5zcXJ0KG5vcm1CKSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldEZhbGxiYWNrUmVzdWx0cyhxdWVyeTogU2VhcmNoUXVlcnkpOiBQcm9taXNlPE9wZW5EYXRhSXRlbVtdPiB7XG4gICAgLy8gUmV0dXJuIGEgYmFzaWMgZmFsbGJhY2sgcmVzdWx0XG4gICAgcmV0dXJuIFt7XG4gICAgICBpZDogJ2ZhbGxiYWNrLXNlYXJjaCcsXG4gICAgICB0aXRsZTogJ+OBiuaOouOBl+OBruaDheWgseOBq+OBpOOBhOOBpicsXG4gICAgICBkZXNjcmlwdGlvbjogJ+OBlOizquWVj+OBq+OBiuetlOOBiOOBp+OBjeOCi+OCiOOBhuWKquOCgeOBvuOBmScsXG4gICAgICBjYXRlZ29yeTogJ2dlbmVyYWwnLFxuICAgICAgdGFnczogWyfmoYjlhoUnXSxcbiAgICAgIGNvbnRlbnQ6IGDnlLPjgZfoqLPjgZTjgZbjgYTjgb7jgZvjgpPjgYzjgIHjgIwke3F1ZXJ5LnRleHR944CN44Gr6Zai44GZ44KL5YW35L2T55qE44Gq5oOF5aCx44GM6KaL44Gk44GL44KK44G+44Gb44KT44Gn44GX44Gf44CCXFxuXFxu5p2x5Lqs6YO944Gu5a2Q6IKy44Gm5pSv5o+044Gr6Zai44GZ44KL44GU6LOq5ZWP44Gn44GX44Gf44KJ44CB5Lul5LiL44Gu5pa55rOV44Gn44KI44KK6Kmz44GX44GE5oOF5aCx44KS5b6X44KL44GT44Go44GM44Gn44GN44G+44GZ77yaXFxuXFxuMS4g5ZCE5Yy65biC55S65p2R44Gu5a2Q44Gp44KC5a625bqt5pSv5o+044K744Oz44K/44O8XFxuMi4g5p2x5Lqs6YO95YWs5byP44Ob44O844Og44Oa44O844K4XFxuMy4g5a2Q6IKy44Gm5b+c5o+044Go44GG44GN44KH44GG44OR44K544Od44O844OI5LqL5qWtXFxuXFxu5YW35L2T55qE44Gq5omL57aa44GN44KE5Yi25bqm44Gr44Gk44GE44Gm44GK55+l44KK44Gr44Gq44KK44Gf44GE5aC05ZCI44Gv44CB44GK5L2P44G+44GE44Gu5Yy65biC55S65p2R56qT5Y+j44Gr44GK5ZWP44GE5ZCI44KP44Gb44GP44Gg44GV44GE44CCYCxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIHNvdXJjZTogJ+OCt+OCueODhuODoCcsXG4gICAgICAgIGxhc3RVcGRhdGVkOiBuZXcgRGF0ZSgpLFxuICAgICAgICBsYW5ndWFnZTogcXVlcnkubGFuZ3VhZ2UgfHwgJ2phJ1xuICAgICAgfVxuICAgIH1dO1xuICB9XG5cbiAgYXN5bmMgZ2V0UmVjb21tZW5kYXRpb25zKGN1cnJlbnRRdWVyeTogc3RyaW5nLCBsaW1pdDogbnVtYmVyID0gMyk6IFByb21pc2U8T3BlbkRhdGFJdGVtW10+IHtcbiAgICAvLyBTaW1wbGUgcmVjb21tZW5kYXRpb24gYmFzZWQgb24gcG9wdWxhci9mZWF0dXJlZCBjb250ZW50XG4gICAgY29uc3QgYWxsSXRlbXMgPSBBcnJheS5mcm9tKHRoaXMuaW5kZXhlZEl0ZW1zLnZhbHVlcygpKTtcbiAgICBcbiAgICAvLyBSZXR1cm4gcmFuZG9tIHNlbGVjdGlvbiBmb3Igbm93IC0gaW4gcHJvZHVjdGlvbiwgdGhpcyB3b3VsZCBiZSBiYXNlZCBvbiB1c2FnZSBwYXR0ZXJuc1xuICAgIGNvbnN0IHNodWZmbGVkID0gYWxsSXRlbXMuc29ydCgoKSA9PiAwLjUgLSBNYXRoLnJhbmRvbSgpKTtcbiAgICByZXR1cm4gc2h1ZmZsZWQuc2xpY2UoMCwgbGltaXQpO1xuICB9XG5cbiAgZ2V0U3RhdHMoKTogeyB0b3RhbEl0ZW1zOiBudW1iZXI7IGNhdGVnb3J5Q291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+IH0ge1xuICAgIGNvbnN0IGNhdGVnb3J5Q291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIEFycmF5LmZyb20odGhpcy5pbmRleGVkSXRlbXMudmFsdWVzKCkpKSB7XG4gICAgICBjYXRlZ29yeUNvdW50c1tpdGVtLmNhdGVnb3J5XSA9IChjYXRlZ29yeUNvdW50c1tpdGVtLmNhdGVnb3J5XSB8fCAwKSArIDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsSXRlbXM6IHRoaXMuaW5kZXhlZEl0ZW1zLnNpemUsXG4gICAgICBjYXRlZ29yeUNvdW50c1xuICAgIH07XG4gIH1cbn0iXSwibmFtZXMiOlsiR2VtaW5pU2VydmljZSIsIk9wZW5EYXRhU2VydmljZSIsIlZlY3RvclNlYXJjaFNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImluZGV4ZWRJdGVtcyIsIk1hcCIsImdlbWluaVNlcnZpY2UiLCJvcGVuRGF0YVNlcnZpY2UiLCJpbml0aWFsaXplSW5kZXgiLCJpdGVtcyIsImZldGNoQ2hpbGRjYXJlRGF0YSIsIml0ZW0iLCJlbWJlZGRpbmdzIiwidGV4dFRvRW1iZWQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiY29udGVudCIsImVtYmVkVGV4dCIsImVycm9yIiwiY29uc29sZSIsImlkIiwic2V0IiwibG9nIiwic2l6ZSIsInNlYXJjaCIsInF1ZXJ5IiwicmVzdWx0cyIsInRleHQiLCJxdWVyeUVtYmVkZGluZyIsInZlY3RvclNpbWlsYXJpdHlTZWFyY2giLCJsaW1pdCIsInRleHRTZWFyY2giLCJBcnJheSIsImZyb20iLCJ2YWx1ZXMiLCJzbGljZSIsImNhdGVnb3J5IiwiZmlsdGVyIiwibGFuZ3VhZ2UiLCJtZXRhZGF0YSIsInRvdGFsIiwibGVuZ3RoIiwiZ2V0RmFsbGJhY2tSZXN1bHRzIiwic2ltaWxhcml0aWVzIiwic2ltaWxhcml0eSIsImNvc2luZVNpbWlsYXJpdHkiLCJwdXNoIiwic29ydCIsImEiLCJiIiwibWFwIiwicyIsInNlYXJjaFRlcm1zIiwidG9Mb3dlckNhc2UiLCJzcGxpdCIsInNlYXJjaGFibGVUZXh0IiwidGFncyIsImpvaW4iLCJzY29yZSIsInRlcm0iLCJpbmNsdWRlcyIsInNvbWUiLCJ0YWciLCJyIiwiZG90UHJvZHVjdCIsIm5vcm1BIiwibm9ybUIiLCJpIiwiTWF0aCIsInNxcnQiLCJzb3VyY2UiLCJsYXN0VXBkYXRlZCIsIkRhdGUiLCJnZXRSZWNvbW1lbmRhdGlvbnMiLCJjdXJyZW50UXVlcnkiLCJhbGxJdGVtcyIsInNodWZmbGVkIiwicmFuZG9tIiwiZ2V0U3RhdHMiLCJjYXRlZ29yeUNvdW50cyIsInRvdGFsSXRlbXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/services/VectorSearchService.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@google"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fnegishi%2FDocuments%2Fdevelop%2FHackathon%2FTokyoOpenDataHackathon%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnegishi%2FDocuments%2Fdevelop%2FHackathon%2FTokyoOpenDataHackathon&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();